"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[690],{2607:function(t,a,e){e.d(a,{$o:function(){return F},DR:function(){return f},G8:function(){return C},JA:function(){return o},LS:function(){return s},Lw:function(){return d},OD:function(){return w},SM:function(){return g},X5:function(){return l},Xm:function(){return x},Xo:function(){return r},Xw:function(){return u},_K:function(){return c},gX:function(){return D},id:function(){return m},o5:function(){return n},q:function(){return p},tp:function(){return h},uQ:function(){return y},zj:function(){return b}});var i=e(7877);const o=()=>i.x1.get("wood-facilities/production-type"),l=t=>i.x1.post(`wood-facilities/production-type/${t.woodType}`,t),n=t=>i.x1.put(`wood-facilities/production-type/${t.woodType}`,t),r=t=>i.x1.delete(`wood-facilities/production-type/${t}`),s=()=>i.x1.get("wood-facilities/operation-form"),h=t=>i.x1.post(`wood-facilities/operation-form/${t.name}`,t),c=t=>i.x1.put(`wood-facilities/operation-form/${t.name}`,t),d=t=>i.x1.delete(`wood-facilities/operation-form/${t}`),u=()=>i.x1.get("wood-facilities"),m=t=>i.x1.put(`wood-facilities/${t.code}`,t),p=t=>i.x1.post(`wood-facilities/${t.code}`,t),g=t=>i.x1.delete(`wood-facilities/${t}`),f=t=>i.x1.put("wood-facilities/production-type/facilities/add",t),y=(t,a)=>i.x1.get(`wood-facilities/production-type/facilities/month/${t}/${a}`),b=(t,a)=>i.x1.get(`wood-facilities/production-type/facilities/quarter/${t}/${a}`),w=(t,a)=>i.x1.get(`wood-facilities/production-type/facilities/year/${t}/${a}`),D=()=>i.x1.get("wood-facilities/production-type/facilities/now"),F=()=>i.x1.get("wood-facilities/coordinates"),C=t=>i.x1.put("wood-facilities/coordinates",t),x=t=>i.x1.delete(`wood-facilities/coordinates/${t}`)},7690:function(t,a,e){e.r(a),e.d(a,{default:function(){return L}});var i=e(3396);const o={class:"grid grid-cols-10 container bg-[url('@/assets/image/wood-facilities-bg.jpg')] bg-cover bg-center"},l={class:"col-start-2 col-span-8 grid grid-cols-10 rounded-[25px] bg-white mt-4 p-5 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"},n=(0,i._)("span",{class:"col-start-3 col-span-7 font-bold text-lg"},"Biểu đồ thống kê tổng số lượng gỗ lưu trữ tại các cơ sở",-1),r={key:1,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},s=(0,i._)("span",null,"Bắt đầu",-1),h={class:""},c=(0,i._)("span",null,"Kết thúc",-1),d={key:2,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},u=(0,i._)("span",null,"Bắt đầu",-1),m={class:""},p=(0,i._)("span",null,"Kết thúc",-1),g={key:3,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},f=(0,i._)("span",null,"Bắt đầu",-1),y={class:""},b=(0,i._)("span",null,"Kết thúc",-1),w={class:"col-start-2 col-span-8 pt-[8rem] pb-[4rem]"},D={class:"col-start-1 col-span-4"},F={class:"col-start-5 col-span-6"},C={class:""},x=(0,i._)("span",{class:"text-[16px]"},"Số lượng gỗ hiện tại",-1),k={class:"col-start-1 col-span-9"},V={class:"grid grid-cols-16 gap-4"},_={class:"grid grid-cols-16 gap-4"},Q=(0,i._)("span",null,"Tạo mới",-1);function T(t,a,e,T,q,v){const B=(0,i.up)("stacked-area-chart"),$=(0,i.up)("el-option"),M=(0,i.up)("el-select"),U=(0,i.up)("VueDatePicker"),W=(0,i.up)("el-table-column"),L=(0,i.up)("el-input"),N=(0,i.up)("el-button"),S=(0,i.up)("el-table"),Y=(0,i.up)("el-card"),E=(0,i.up)("el-form-item"),X=(0,i.up)("el-date-picker"),H=(0,i.up)("font-awesome-icon"),K=(0,i.up)("el-form"),z=(0,i.up)("el-dialog"),j=(0,i.up)("el-col"),O=(0,i.up)("el-row"),A=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",l,[n,0!=q.chartData.size?((0,i.wg)(),(0,i.j4)(B,{key:0,class:"col-start-3 col-span-7 h-[500px] mt-5","chart-label":q.chartLabel,"chart-data":q.chartData},null,8,["chart-label","chart-data"])):(0,i.kq)("",!0),(0,i.Wm)(M,{modelValue:q.dataType,"onUpdate:modelValue":a[0]||(a[0]=t=>q.dataType=t),class:"mt-[3rem] mr-3 col-start-3 col-span-1",placeholder:"Select",size:"large"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(q.dataTypes,(t=>((0,i.wg)(),(0,i.j4)($,{key:t.label,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"month"==q.dataType?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",null,[s,(0,i.Wm)(U,{modelValue:q.beginMonth,"onUpdate:modelValue":a[1]||(a[1]=t=>q.beginMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",h,[c,(0,i.Wm)(U,{modelValue:q.endMonth,"onUpdate:modelValue":a[2]||(a[2]=t=>q.endMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"quarter"==q.dataType?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",null,[u,(0,i.Wm)(U,{modelValue:q.beginQuarter,"onUpdate:modelValue":a[3]||(a[3]=t=>q.beginQuarter=t),"quarter-picker":""},null,8,["modelValue"])]),(0,i._)("div",m,[p,(0,i.Wm)(U,{modelValue:q.endQuarter,"onUpdate:modelValue":a[4]||(a[4]=t=>q.endQuarter=t),"quarter-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"year"==q.dataType?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[f,(0,i.Wm)(U,{modelValue:q.beginYear,"onUpdate:modelValue":a[5]||(a[5]=t=>q.beginYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",y,[b,(0,i.Wm)(U,{modelValue:q.endYear,"onUpdate:modelValue":a[6]||(a[6]=t=>q.endYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0)]),(0,i._)("div",w,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{span:24,offset:0},{default:(0,i.w5)((()=>[(0,i.Wm)(Y,{class:"h-[530px] rounded-[50px] mb-2",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{data:q.filterFacilitiesTable,class:"h-[530px] w-[93rem]",fit:""},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{label:"Mã",prop:"code",align:"center"}),(0,i.Wm)(W,{label:"Tên cơ sở",prop:"name",align:"center"}),(0,i.Wm)(W,{label:"Ngày thành lập",prop:"date",align:"center"}),(0,i.Wm)(W,{label:"Sức chứa",prop:"capacity",align:"center"}),(0,i.Wm)(W,{label:"Trực thuộc (mã)",prop:"administration[code]",align:"center"}),(0,i.Wm)(W,{"min-width":120,align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.search,"onUpdate:modelValue":a[7]||(a[7]=t=>q.search=t),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((t=>[(0,i.Wm)(N,{onClick:a=>v.handleClickUpdate(t.$index,t.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,i.Wm)(z,{id:"facilitiesDialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"8vh",modelValue:q.dialogFormVisible,"onUpdate:modelValue":a[23]||(a[23]=t=>q.dialogFormVisible=t),title:v.formTitle,"before-close":v.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",_,["update"==q.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[20]||(a[20]=(...t)=>v.handleDelete&&v.handleDelete(...t))}," Xóa ")):(0,i.kq)("",!0),"update"==q.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[21]||(a[21]=t=>v.handleUpdate(this.$refs.facilitiesForm))}," Cập nhập ")):(0,i.kq)("",!0),"create"==q.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[22]||(a[22]=t=>v.handleCreateFacility(this.$refs.facilitiesForm))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"grid grid-cols-10 gap-10",ref:"facilitiesForm",model:q.form,"status-icon":"",rules:q.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",D,[(0,i.Wm)(E,{label:"Mã",prop:"code"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.form.code,"onUpdate:modelValue":a[8]||(a[8]=t=>q.form.code=t),disabled:"update"==q.formType},null,8,["modelValue","disabled"])])),_:1}),(0,i.Wm)(E,{label:"Tên cơ sở",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.form.name,"onUpdate:modelValue":a[9]||(a[9]=t=>q.form.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(E,{label:"Sức chứa",prop:"capacity"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.form.capacity,"onUpdate:modelValue":a[10]||(a[10]=t=>q.form.capacity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(E,{label:"Ngày thành lập",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{modelValue:q.form.date,"onUpdate:modelValue":a[11]||(a[11]=t=>q.form.date=t),type:"date",placeholder:"Chọn ngày thành lập",size:"default","disabled-date":v.disabledDate},null,8,["modelValue","disabled-date"])])),_:1}),(0,i.Wm)(E,{label:"Hình thức hoạt động",prop:"operationFormName"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.form.operationFormName,"onUpdate:modelValue":a[12]||(a[12]=t=>q.form.operationFormName=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(E,{label:"Trực thuộc (mã)",prop:"administrationCode"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.form.administrationCode,"onUpdate:modelValue":a[13]||(a[13]=t=>q.form.administrationCode=t)},null,8,["modelValue"])])),_:1})]),(0,i._)("div",F,[(0,i._)("div",C,[x,(0,i._)("button",{class:"ml-[4rem] px-3 py-2 col-span-6 col-start-1 font-sans font-bold text-sm text-white rounded-lg shadow-lg bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[14]||(a[14]=(...t)=>v.handleClickCreateQuantity&&v.handleClickCreateQuantity(...t))},[(0,i.Wm)(H,{class:"pr-1",icon:["fas","plus"]}),(0,i.Uk)(" Thêm bản ghi ")])]),(0,i.Wm)(S,{class:"mt-2",data:v.animalQuantityTable,height:"420",border:""},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{prop:"objName",label:"Loại gỗ",align:"center"}),(0,i.Wm)(W,{prop:"quantity",label:"Số lượng",align:"center"})])),_:1},8,["data"])])])),_:1},8,["model","rules"]),(0,i.Wm)(z,{class:"w-[25rem] rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",modelValue:q.dialogQuantityFormVisible,"onUpdate:modelValue":a[19]||(a[19]=t=>q.dialogQuantityFormVisible=t),title:"Số lượng động vật","before-close":v.handleCancelInAnimalTable,id:"animalQuantityDialog"},{footer:(0,i.w5)((()=>[(0,i._)("span",V,[(0,i._)("button",{class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[18]||(a[18]=t=>v.handleCreateQuantity(this.$refs.quantityForm))}," Tạo mới ")])])),default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"grid grid-cols-10 gap-10",ref:"quantityForm",model:q.quantityForm,"status-icon":"",rules:q.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",k,[(0,i.Wm)(E,{label:"Loại gỗ",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.quantityForm.name,"onUpdate:modelValue":a[15]||(a[15]=t=>q.quantityForm.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(E,{label:"Số lượng",prop:"quantity"},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{modelValue:q.quantityForm.quantity,"onUpdate:modelValue":a[16]||(a[16]=t=>q.quantityForm.quantity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(E,{label:"Ngày thống kê",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(X,{modelValue:q.quantityForm.date,"onUpdate:modelValue":a[17]||(a[17]=t=>q.quantityForm.date=t),type:"date",locale:"vi",placeholder:"Chọn ngày thống kê",size:"default","disabled-date":v.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])),_:1},8,["modelValue","title","before-close"])])),_:1})])),_:1})),[[A,q.loadingStatus]]),(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{offset:2},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 mt-3 ml-4 space-x-4 font-sans font-bold text-white rounded-[10px] shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[24]||(a[24]=(...t)=>v.handleClickCreateFacility&&v.handleClickCreateFacility(...t))},[(0,i.Wm)(H,{icon:["fas","plus"],size:"lg"}),Q])])),_:1})])),_:1})])])),[[A,q.loadingStatus]])}e(560);var q=e(1278),v=e(2607),B=(e(5039),e(3881)),$=e(7514),M={name:"animalFacility",components:{StackedAreaChart:q.Z},data(){return{loadingStatus:!1,quarter:(0,B.Z)(new Date),beginMonth:{month:(new Date).getMonth()-6,year:(new Date).getFullYear()},endMonth:{month:(new Date).getMonth()-1,year:(new Date).getFullYear()},beginQuarter:new Date("2023-01-01"),endQuarter:new Date,beginYear:(new Date).getFullYear()-1,endYear:(new Date).getFullYear(),chartLabel:[],chartData:new Map,chartLabelCopy:[],chartDataCopy:new Map,dataTypes:[{value:"month",label:"Tháng"},{value:"quarter",label:"Quý"},{value:"year",label:"Năm"}],dataType:"month",search:"",facilitiesTable:[],filterFacilitiesTable:[],animalQuantityData:null,dialogFormVisible:!1,dialogQuantityFormVisible:!1,form:{code:"",name:"",date:"",capacity:"",operationFormName:"",administrationCode:""},formBackUp:null,formType:"update",quantityForm:{name:"",quantity:"",date:""},quantityFormBackUp:null,rules:{code:[{validator:this.checkEmptyField,trigger:"blur"}],name:[{validator:this.checkEmptyField,trigger:"blur"}],date:[{validator:this.checkEmptyField,trigger:"blur"}],capacity:[{validator:this.checkCapacity,trigger:"blur"}],operationFormName:[{validator:this.checkEmptyField,trigger:"blur"}],administrationCode:[{validator:this.checkEmptyField,trigger:"blur"}],quantity:[{validator:this.checkQuantity,trigger:"blur"}]}}},computed:{formatBeginMonth(){if(null!=this.beginMonth){let t=this.beginMonth.month<9?"0"+(this.beginMonth.month+1):this.beginMonth.month+1,a=this.beginMonth.year+"-"+t+"-01";return a}},formatEndMonth(){if(null!=this.endMonth){let t=this.endMonth.month<9?"0"+(this.endMonth.month+1):this.endMonth.month+1,a=this.endMonth.year+"-"+t+"-01";return a}},formatBeginQuarter(){if(null!=this.beginQuarter){let t=this.beginQuarter.getMonth()<9?"0"+(this.beginQuarter.getMonth()+1):this.beginQuarter.getMonth()+1,a=this.beginQuarter.getFullYear()+"-"+t+"-01";return a}},formatEndQuarter(){if(null!=this.endQuarter){let t=this.endQuarter.getMonth()<9?"0"+(this.endQuarter.getMonth()+1):this.endQuarter.getMonth()+1,a=this.endQuarter.getFullYear()+"-"+t+"-01";return a}},formTitle(){return"update"==this.formType?"Cập nhập":"Tạo mới"},animalQuantityTable(){if(null!=this.animalQuantityData&&""!=this.form.code)return this.animalQuantityData.get(this.form.code)}},watch:{dataType(t){"month"==t?this.formatBeginMonth&&null!=this.formatEndMonth&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth)):"quarter"==t?this.formatBeginQuarter&&null!=this.formatEndQuarter&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,this.formatEndQuarter)):this.beginYear&&null!=this.endYear&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,this.endYear))},formatBeginMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(t,this.formatEndMonth))},formatEndMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,t))},formatBeginQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(t,this.formatEndQuarter))},formatEndQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,t))},beginYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(t,this.endYear)),console.log(t)},endYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,t)),console.log(t)},search(t){this.filterFacilitiesTable=this.facilitiesTable.filter((a=>!t||a.name.toLowerCase().includes(t.toLowerCase())))}},methods:{setupQuantityDataByMonth(t,a){this.loadingStatus=!0,v.uQ(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].date.slice(0,7);this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupQuantityDataByQuarter(t,a){this.loadingStatus=!0,v.zj(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].quarter;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupQuantityDataByYear(t,a){this.loadingStatus=!0,v.OD(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].year;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},formatQuarter(t){return console.log(t),(0,$.Z)(t,"QQQ")},setupFacilities(){this.loadingStatus=!0,v.Xw().then((t=>{this.facilitiesTable=t.data,this.filterFacilitiesTable=this.facilitiesTable,this.loadingStatus=!1})).catch((t=>{console.log(t)}))},setupQuantity(){this.loadingStatus=!0,v.gX().then((t=>{this.animalQuantityData=new Map(Object.entries(t.data)),this.loadingStatus=!1})).catch((t=>{}))},handleClickUpdate(t,a){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="update",this.form=a,this.form.administrationCode=a.administration.code,this.form.operationFormName=a.operationForm.name,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,operationFormName:this.form.operationFormName,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleUpdate(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#facilitiesDialog")});let a={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,operationFormName:this.form.operationFormName,adminstrationCode:this.form.administrationCode};v.id(a).then((a=>{t.close(),this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.dialogFormVisible=!1,this.setupFacilities()})).catch((a=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:a.response.data.messages,type:"error"}),console.log(a.message)}catch(e){console.log(e)}}))})).catch((t=>{}))}))},handleCancel(){null!=this.form&&null!=this.formBackUp&&(this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.date==this.formBackUp.date&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationCode==this.formBackUp.administrationCode?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.date=this.formBackUp.date,this.form.capacity=this.formBackUp.capacity,this.form.administrationCode=this.formBackUp.administrationCode),this.dialogFormVisible=!1})).catch((()=>{})))},handleCancelInAnimalTable(){null!=this.quantityFormBackUp&&null!=this.quantityForm&&(this.quantityForm.name==this.quantityFormBackUp.name&&this.quantityForm.quantity==this.quantityFormBackUp.quantity?this.dialogquantityFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.quantityFormBackUp&&(this.quantityForm.name=this.quantityFormBackUp.name,this.quantityForm.quantity=this.quantityFormBackUp.quantity),this.dialogQuantityFormVisible=!1})).catch((()=>{}))),this.dialogQuantityFormVisible=!1},handleClickCreateFacility(){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="create",this.resetFormData(),this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,operationFormName:this.form.operationFormName,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleCreateFacility(t){t&&t.validate((t=>{t&&this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#facilitiesDialog")});let a={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,operationFormName:this.form.operationFormName,adminstrationCode:this.form.administrationCode};v.q(a).then((a=>{t.close(),this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.dialogFormVisible=!1,this.setupFacilities()})).catch((a=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:a.response.data.messages,type:"error"}),console.log(a.message)}catch(e){console.log(e)}}))})).catch((t=>{}))}))},handleClickCreateQuantity(){null!=this.$refs.quantityForm&&this.$refs.quantityForm.clearValidate(),this.resetQuantityFormData(),this.quantityFormBackUp={name:this.quantityForm.name,quantity:this.quantityForm.quantity},this.dialogQuantityFormVisible=!0},handleCreateQuantity(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#animalQuantityDialog")});let a={codeWF:this.form.code,namePT:this.quantityForm.name,quantity:this.quantityForm.quantity,date:Date.now()};t.close(),v.DR(a).then((t=>{this.dialogQuantityFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.setupQuantity()})).catch((a=>{t.close();let e="";try{e=a.response.data.messages}catch(a){console.log(a)}this.$notify({title:"Đã xảy ra lỗi",message:e,type:"error"})}))})).catch((t=>{console.log(t)}))}))},handleDelete(){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#facilitiesDialog")});v.SM(this.form.code).then((()=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.setupFacilities()})).catch((a=>{t.close();let e="";try{e=a.response.data.messages,this.$notify({title:"Đã xảy ra lỗi",message:e,type:"error"})}catch(i){}console.log(a)}))})).catch((()=>{}))},resetFormData(){this.form={code:"",name:"",date:"",capacity:1,operationFormName:"",administrationCode:""}},resetQuantityFormData(){this.quantityForm={name:"",quantity:1}},checkEmptyField(t,a,e){return null==a||/^\s*$/.test(a)?e(new Error("Vui lòng nhập thông tin này")):e()},checkQuantity(t,a,e){let i=/^\s*$/;return i.test(a)||isNaN(a)?e(new Error("Giá trị của thông tin này phải là số nguyên")):e()},checkCapacity(t,a,e){let i=/^\s*$/;return i.test(a)||isNaN(a)||a<1?e(new Error("Giá trị của thông tin này phải là số nguyên dương")):e()},disabledDate(t){return t>Date.now()}},created(){this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth),this.setupFacilities(),this.setupQuantity()}},U=e(89);const W=(0,U.Z)(M,[["render",T]]);var L=W}}]);
//# sourceMappingURL=690.4e1bcfec.js.map