"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[501],{1501:function(t,a,e){e.r(a),e.d(a,{default:function(){return $}});var i=e(3396);const l={class:"w-[100%] grid grid-cols-10 container bg-[url('@/assets/image/animal-facilities-bg.jpg')] bg-cover"},n={class:"col-start-2 col-span-8 grid grid-cols-10 rounded-[25px] bg-white mt-4 mb-7 p-5 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"},o=(0,i._)("span",{class:"col-start-3 col-span-7 font-bold text-lg"},"Biểu đồ thống kê tổng số lượng động vật lưu trữ tại các cơ sở",-1),s={key:1,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},r=(0,i._)("span",null,"Bắt đầu",-1),h={class:""},c=(0,i._)("span",null,"Kết thúc",-1),d={key:2,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},m=(0,i._)("span",null,"Bắt đầu",-1),u={class:""},p=(0,i._)("span",null,"Kết thúc",-1),g={key:3,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},y=(0,i._)("span",null,"Bắt đầu",-1),f={class:""},b=(0,i._)("span",null,"Kết thúc",-1),w={class:"w-[100%] col-start-2 col-span-8 pt-[4rem] pb-[2rem]"},D={class:"col-start-1 col-span-4"},C={class:"col-start-5 col-span-6"},F={class:""},k=(0,i._)("span",{class:"text-[16px]"},"Số lượng động vật hiện tại",-1),T={class:"col-start-1 col-span-9"},_={class:"grid grid-cols-16 gap-4"},V={class:"grid grid-cols-16 gap-4"},x=(0,i._)("span",null,"Tạo mới",-1);function Q(t,a,e,Q,v,B){const M=(0,i.up)("stacked-area-chart"),U=(0,i.up)("el-option"),W=(0,i.up)("el-select"),L=(0,i.up)("VueDatePicker"),q=(0,i.up)("el-table-column"),$=(0,i.up)("el-input"),N=(0,i.up)("el-button"),S=(0,i.up)("el-table"),A=(0,i.up)("el-card"),Y=(0,i.up)("el-form-item"),E=(0,i.up)("el-date-picker"),H=(0,i.up)("font-awesome-icon"),K=(0,i.up)("el-form"),z=(0,i.up)("el-dialog"),X=(0,i.up)("el-col"),j=(0,i.up)("el-row"),O=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",n,[o,0!=v.chartData.size?((0,i.wg)(),(0,i.j4)(M,{key:0,class:"col-start-3 col-span-7 h-[400px] mt-5","chart-label":v.chartLabel,"chart-data":v.chartData},null,8,["chart-label","chart-data"])):(0,i.kq)("",!0),(0,i.Wm)(W,{modelValue:v.dataType,"onUpdate:modelValue":a[0]||(a[0]=t=>v.dataType=t),class:"mt-[3rem] mr-3 col-start-3 col-span-1",placeholder:"Select",size:"large"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.dataTypes,(t=>((0,i.wg)(),(0,i.j4)(U,{key:t.label,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"month"==v.dataType?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",null,[r,(0,i.Wm)(L,{modelValue:v.beginMonth,"onUpdate:modelValue":a[1]||(a[1]=t=>v.beginMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",h,[c,(0,i.Wm)(L,{modelValue:v.endMonth,"onUpdate:modelValue":a[2]||(a[2]=t=>v.endMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"quarter"==v.dataType?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",null,[m,(0,i.Wm)(L,{modelValue:v.beginQuarter,"onUpdate:modelValue":a[3]||(a[3]=t=>v.beginQuarter=t),"quarter-picker":""},null,8,["modelValue"])]),(0,i._)("div",u,[p,(0,i.Wm)(L,{modelValue:v.endQuarter,"onUpdate:modelValue":a[4]||(a[4]=t=>v.endQuarter=t),"quarter-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"year"==v.dataType?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[y,(0,i.Wm)(L,{modelValue:v.beginYear,"onUpdate:modelValue":a[5]||(a[5]=t=>v.beginYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",f,[b,(0,i.Wm)(L,{modelValue:v.endYear,"onUpdate:modelValue":a[6]||(a[6]=t=>v.endYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0)]),(0,i._)("div",w,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(j,null,{default:(0,i.w5)((()=>[(0,i.Wm)(X,{span:24,offset:0},{default:(0,i.w5)((()=>[(0,i.Wm)(A,{class:"h-[500px] rounded-[50px]",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{data:v.filterFacilitiesTable,class:"h-[500px] w-[93rem]",fit:""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{label:"Mã",prop:"code",align:"center"}),(0,i.Wm)(q,{label:"Tên cơ sở",prop:"name",align:"center"}),(0,i.Wm)(q,{label:"Ngày thành lập",prop:"date",align:"center"}),(0,i.Wm)(q,{label:"Sức chứa",prop:"capacity",align:"center"}),(0,i.Wm)(q,{label:"Trực thuộc (mã)",prop:"administration[code]",align:"center"}),(0,i.Wm)(q,{"min-width":120,align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.search,"onUpdate:modelValue":a[7]||(a[7]=t=>v.search=t),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((t=>[(0,i.Wm)(N,{onClick:a=>B.handleClickUpdate(t.$index,t.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,i.Wm)(z,{id:"animalFacilitiesDialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"8vh",modelValue:v.dialogFormVisible,"onUpdate:modelValue":a[22]||(a[22]=t=>v.dialogFormVisible=t),title:B.formTitle,"before-close":B.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",V,["update"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[19]||(a[19]=(...t)=>B.handleDelete&&B.handleDelete(...t))}," Xóa ")):(0,i.kq)("",!0),"update"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[20]||(a[20]=t=>B.handleUpdate(this.$refs.facilitiesForm))}," Cập nhập ")):(0,i.kq)("",!0),"create"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[21]||(a[21]=t=>B.handleCreateAnimalFacility(this.$refs.facilitiesForm))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"grid grid-cols-10 gap-10",ref:"facilitiesForm",model:v.form,"status-icon":"",rules:v.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",D,[(0,i.Wm)(Y,{label:"Mã",prop:"code"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.form.code,"onUpdate:modelValue":a[8]||(a[8]=t=>v.form.code=t),disabled:"update"==v.formType},null,8,["modelValue","disabled"])])),_:1}),(0,i.Wm)(Y,{label:"Tên cơ sở",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.form.name,"onUpdate:modelValue":a[9]||(a[9]=t=>v.form.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Sức chứa",prop:"capacity"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.form.capacity,"onUpdate:modelValue":a[10]||(a[10]=t=>v.form.capacity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Ngày thành lập",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{modelValue:v.form.date,"onUpdate:modelValue":a[11]||(a[11]=t=>v.form.date=t),type:"date",placeholder:"Chọn ngày thành lập",locale:"vi",size:"default","disabled-date":B.disabledDate},null,8,["modelValue","disabled-date"])])),_:1}),(0,i.Wm)(Y,{label:"Trực thuộc (mã)",prop:"administrationCode"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.form.administrationCode,"onUpdate:modelValue":a[12]||(a[12]=t=>v.form.administrationCode=t)},null,8,["modelValue"])])),_:1})]),(0,i._)("div",C,[(0,i._)("div",F,[k,(0,i._)("button",{class:"ml-[4rem] px-3 py-2 col-span-6 col-start-1 font-sans font-bold text-sm text-white rounded-lg shadow-lg bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[13]||(a[13]=(...t)=>B.handleClickCreateAnimalQuantity&&B.handleClickCreateAnimalQuantity(...t))},[(0,i.Wm)(H,{class:"pr-1",icon:["fas","plus"]}),(0,i.Uk)(" Thêm bản ghi ")])]),(0,i.Wm)(S,{class:"mt-2",data:B.animalQuantityTable,height:"340",border:""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{prop:"objName",label:"Tên động vật",align:"center"}),(0,i.Wm)(q,{prop:"quantity",label:"Số lượng",align:"center"})])),_:1},8,["data"])])])),_:1},8,["model","rules"]),(0,i.Wm)(z,{class:"w-[25rem] rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",modelValue:v.dialogAnimalFormVisible,"onUpdate:modelValue":a[18]||(a[18]=t=>v.dialogAnimalFormVisible=t),title:"Số lượng động vật","before-close":B.handleCancelInAnimalTable,id:"animalQuantityDialog"},{footer:(0,i.w5)((()=>[(0,i._)("span",_,[(0,i._)("button",{class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[17]||(a[17]=t=>B.handleCreateAnimalQuantity(this.$refs.animalQuantityForm))}," Tạo mới ")])])),default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"grid grid-cols-10 gap-10",ref:"animalQuantityForm",model:v.animalForm,"status-icon":"",rules:v.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",T,[(0,i.Wm)(Y,{label:"Tên động vật",prop:"animalName"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.animalForm.animalName,"onUpdate:modelValue":a[14]||(a[14]=t=>v.animalForm.animalName=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Số lượng",prop:"quantity"},{default:(0,i.w5)((()=>[(0,i.Wm)($,{modelValue:v.animalForm.quantity,"onUpdate:modelValue":a[15]||(a[15]=t=>v.animalForm.quantity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Ngày thống kê",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{modelValue:v.animalForm.date,"onUpdate:modelValue":a[16]||(a[16]=t=>v.animalForm.date=t),type:"date",locale:"vi",placeholder:"Chọn ngày thống kê",size:"default","disabled-date":B.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])),_:1},8,["modelValue","title","before-close"])])),_:1})])),_:1})),[[O,v.loadingStatus]]),(0,i.Wm)(j,null,{default:(0,i.w5)((()=>[(0,i.Wm)(X,{offset:2},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 mt-3 ml-4 space-x-4 font-sans font-bold text-white rounded-[10px] shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[23]||(a[23]=(...t)=>B.handleClickCreateAnimalFacility&&B.handleClickCreateAnimalFacility(...t))},[(0,i.Wm)(H,{icon:["fas","plus"],size:"lg"}),x])])),_:1})])),_:1})])])),[[O,v.loadingStatus]])}e(560);var v=e(1278),B=e(5039),M=e(3881),U=e(7514),W={name:"animalFacility",components:{StackedAreaChart:v.Z},data(){return{loadingStatus:!1,quarter:(0,M.Z)(new Date),beginMonth:{month:(new Date).getMonth()>=6?(new Date).getMonth()-6:(new Date).getMonth()+6,year:(new Date).getMonth()>6?(new Date).getFullYear():(new Date).getFullYear()-1},endMonth:{month:(new Date).getMonth(),year:(new Date).getFullYear()},beginQuarter:new Date("2023-01-01"),endQuarter:new Date,beginYear:(new Date).getFullYear()-1,endYear:(new Date).getFullYear(),chartLabel:[],chartData:new Map,chartLabelCopy:[],chartDataCopy:new Map,dataTypes:[{value:"month",label:"Tháng"},{value:"quarter",label:"Quý"},{value:"year",label:"Năm"}],dataType:"month",search:"",facilitiesTable:[],filterFacilitiesTable:[],animalQuantityData:null,dialogFormVisible:!1,dialogAnimalFormVisible:!1,form:{code:"",name:"",date:"",capacity:"",administrationCode:""},formBackUp:null,formType:"update",animalForm:{animalName:"",quantity:"",date:""},animalFormBackUp:null,rules:{code:[{validator:this.checkEmptyField,trigger:"blur"}],name:[{validator:this.checkEmptyField,trigger:"blur"}],date:[{validator:this.checkEmptyField,trigger:"blur"}],capacity:[{validator:this.checkCapacity,trigger:"blur"}],administrationCode:[{validator:this.checkEmptyField,trigger:"blur"}],animalName:[{validator:this.checkEmptyField,trigger:"blur"}],quantity:[{validator:this.checkQuantity,trigger:"blur"}]}}},computed:{formatBeginMonth(){if(null!=this.beginMonth){console.log((new Date).getMonth>=6),console.log(this.beginMonth);let t=this.beginMonth.month<9?"0"+(this.beginMonth.month+1):this.beginMonth.month+1,a=this.beginMonth.year+"-"+t+"-01";return a}},formatEndMonth(){if(null!=this.endMonth){let t=this.endMonth.month<9?"0"+(this.endMonth.month+1):this.endMonth.month+1,a=this.endMonth.year+"-"+t+"-01";return a}},formatBeginQuarter(){if(null!=this.beginQuarter){let t=this.beginQuarter.getMonth()<9?"0"+(this.beginQuarter.getMonth()+1):this.beginQuarter.getMonth()+1,a=this.beginQuarter.getFullYear()+"-"+t+"-01";return a}},formatEndQuarter(){if(null!=this.endQuarter){let t=this.endQuarter.getMonth()<9?"0"+(this.endQuarter.getMonth()+1):this.endQuarter.getMonth()+1,a=this.endQuarter.getFullYear()+"-"+t+"-01";return a}},formTitle(){return"update"==this.formType?"Cập nhập":"Tạo mới"},animalQuantityTable(){if(null!=this.animalQuantityData&&""!=this.form.code)return this.animalQuantityData.get(this.form.code)}},watch:{dataType(t){"month"==t?this.formatBeginMonth&&null!=this.formatEndMonth&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth)):"quarter"==t?this.formatBeginQuarter&&null!=this.formatEndQuarter&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,this.formatEndQuarter)):this.beginYear&&null!=this.endYear&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,this.endYear))},formatBeginMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(t,this.formatEndMonth))},formatEndMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,t))},formatBeginQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(t,this.formatEndQuarter))},formatEndQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,t))},beginYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(t,this.endYear)),console.log(t)},endYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,t)),console.log(t)},search(t){this.filterFacilitiesTable=this.facilitiesTable.filter((a=>!t||a.name.toLowerCase().includes(t.toLowerCase())))}},methods:{setupQuantityDataByMonth(t,a){this.loadingStatus=!0,B.LJ(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].date.slice(0,7);this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupQuantityDataByQuarter(t,a){this.loadingStatus=!0,B.TC(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].quarter;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupQuantityDataByYear(t,a){this.loadingStatus=!0,B.Hw(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].year;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else{let e=[];for(let t=0;t<a;t++)e.push(0);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},formatQuarter(t){return console.log(t),(0,U.Z)(t,"QQQ")},setupFacilities(){this.loadingStatus=!0,B.Jz().then((t=>{this.facilitiesTable=t.data,this.filterFacilitiesTable=this.facilitiesTable,this.loadingStatus=!1})).catch((t=>{console.log(t)}))},setupAnimalQuantity(){this.loadingStatus=!0,B.$y().then((t=>{this.animalQuantityData=new Map(Object.entries(t.data)),this.loadingStatus=!1})).catch((t=>{}))},handleClickUpdate(t,a){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="update",this.form=a,this.form.administrationCode=a.administration.code,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleUpdate(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#animalFacilitiesDialog")});let a={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,adminstrationCode:this.form.administrationCode,detail:""};B.QB(a).then((a=>{t.close(),this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.dialogFormVisible=!1,this.setupFacilities()})).catch((a=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:a.response.data.messages,type:"error"}),console.log(a.message)}catch(e){console.log(e)}}))})).catch((t=>{}))}))},handleCancel(){null!=this.form&&null!=this.formBackUp&&(this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.date==this.formBackUp.date&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationCode==this.formBackUp.administrationCode?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.date=this.formBackUp.date,this.form.capacity=this.formBackUp.capacity,this.form.administrationCode=this.formBackUp.administrationCode),this.dialogFormVisible=!1})).catch((()=>{})))},handleCancelInAnimalTable(){null!=this.animalFormBackUp&&null!=this.animalForm&&(this.animalForm.animalName==this.animalFormBackUp.animalName&&this.animalForm.quantity==this.animalFormBackUp.quantity?this.dialogAnimalFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.animalFormBackUp&&(this.animalForm.animalName=this.animalFormBackUp.animalName,this.animalForm.quantity=this.animalFormBackUp.quantity),this.dialogAnimalFormVisible=!1})).catch((()=>{}))),this.dialogAnimalFormVisible=!1},handleClickCreateAnimalFacility(){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="create",this.resetFormData(),this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleCreateAnimalFacility(t){t&&t.validate((t=>{t&&this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#animalFacilitiesDialog")});let a={code:this.form.code,name:this.form.name,date:Date.now(),capacity:this.form.capacity,adminstrationCode:this.form.administrationCode,detail:""};B.hI(a).then((a=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",type:"success",message:"Tạo mới thành công"}),this.setupFacilities()})).catch((a=>{t.close();try{let t="";t=a.response.data.messages,this.$notify({title:"Đã xảy ra lỗi",type:"error",message:t})}catch(e){}}))})).catch((()=>{}))}))},handleClickCreateAnimalQuantity(){null!=this.$refs.animalQuantityForm&&this.$refs.animalQuantityForm.clearValidate(),this.resetAnimalFormData(),this.animalFormBackUp={animalName:this.animalForm.animalName,quantity:this.animalForm.quantity},this.dialogAnimalFormVisible=!0},handleCreateAnimalQuantity(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#animalQuantityDialog")});let a={codeASF:this.form.code,nameAS:this.animalForm.animalName,quantity:this.animalForm.quantity,date:this.animalForm.date};t.close(),B.jD(a).then((t=>{this.dialogAnimalFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.setupAnimalQuantity()})).catch((a=>{t.close();let e="";try{e=a.response.data.messages}catch(a){console.log(a)}this.$notify({title:"Đã xảy ra lỗi",message:e,type:"error"})}))})).catch((t=>{console.log(t)}))}))},handleDelete(){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#animalFacilitiesDialog")});B.rF(this.form.code).then((()=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.setupFacilities()})).catch((a=>{t.close();let e="";try{e=a.response.data.messages,this.$notify({title:"Đã xảy ra lỗi",message:e,type:"error"})}catch(i){}console.log(a)}))})).catch((()=>{}))},resetFormData(){this.form={code:"",name:"",date:"",capacity:1,administrationCode:""}},resetAnimalFormData(){this.animalForm={animalName:"",quantity:1}},checkEmptyField(t,a,e){return null==a||/^\s*$/.test(a)?e(new Error("Vui lòng nhập thông tin này")):e()},checkQuantity(t,a,e){let i=/^\s*$/;return i.test(a)||isNaN(a)?e(new Error("Giá trị của thông tin này phải là số nguyên")):e()},checkCapacity(t,a,e){let i=/^\s*$/;return i.test(a)||isNaN(a)||a<1?e(new Error("Giá trị của thông tin này phải là số nguyên dương")):e()},disabledDate(t){return t>Date.now()}},created(){this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth),this.setupFacilities(),this.setupAnimalQuantity()}},L=e(89);const q=(0,L.Z)(W,[["render",Q]]);var $=q}}]);
//# sourceMappingURL=501.24d16b35.js.map