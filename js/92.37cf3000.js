"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[92],{2607:function(e,t,o){o.d(t,{JA:function(){return i},LS:function(){return s},Lw:function(){return h},X5:function(){return r},Xo:function(){return l},Xw:function(){return u},_K:function(){return d},o5:function(){return n},tp:function(){return c},uQ:function(){return m}});var a=o(7877);const i=()=>a.x.get("wood-facilities/production-type"),r=e=>a.x.post(`wood-facilities/production-type/${e.woodType}`,e),n=e=>a.x.put(`wood-facilities/production-type/${e.woodType}`,e),l=e=>a.x.delete(`wood-facilities/production-type/${e}`),s=()=>a.x.get("wood-facilities/operation-form"),c=e=>a.x.post(`wood-facilities/operation-form/${e.name}`,e),d=e=>a.x.put(`wood-facilities/operation-form/${e.name}`,e),h=e=>a.x.delete(`wood-facilities/operation-form/${e}`),u=()=>a.x.get("wood-facilities"),m=(e,t)=>a.x.get(`wood-facilities/production-type/facilities/month/${e}/${t}`)},8092:function(e,t,o){o.r(t),o.d(t,{default:function(){return f}});var a=o(3396);const i={class:"container bg-[url('@/assets/image/operation-form-bg.jpg')] bg-cover"},r={class:"grid grid-cols-20 px-[9rem] pt-[3rem]"},n={class:"col-start-3"},l={class:"col-start-1 col-span-10"},s={class:"grid grid-cols-16 gap-4"},c=(0,a._)("span",null,"Tạo mới",-1);function d(e,t,o,d,h,u){const m=(0,a.up)("el-table-column"),p=(0,a.up)("el-input"),f=(0,a.up)("el-button"),g=(0,a.up)("el-table"),b=(0,a.up)("el-card"),w=(0,a.up)("el-form-item"),y=(0,a.up)("el-form"),x=(0,a.up)("el-dialog"),T=(0,a.up)("font-awesome-icon"),k=(0,a.up)("el-col"),v=(0,a.up)("el-row"),_=(0,a.Q2)("loading");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("p",i,[(0,a._)("div",r,[(0,a._)("div",n,[(0,a.Wm)(b,{class:"h-[550px] w-[60rem] rounded-3xl",shadow:"always"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{data:h.filterTableData,class:"h-[520px] break-normal",style:{"--el-table-row-hover-bg-color":"#D0D3D4"},fit:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.tableColumns,((e,t)=>((0,a.wg)(),(0,a.j4)(m,{key:t,label:e.title,prop:e.value,align:"center"},null,8,["label","prop"])))),128)),(0,a.Wm)(m,{"min-width":120,align:"center"},{header:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:h.search,"onUpdate:modelValue":t[0]||(t[0]=e=>h.search=e),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,a.w5)((e=>[(0,a.Wm)(f,{onClick:t=>u.handleEdit(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Wm)(x,{class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"4vh",modelValue:h.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>h.dialogFormVisible=e),title:u.formTitle,"before-close":u.handleCancel},{footer:(0,a.w5)((()=>[(0,a._)("span",s,["update"==h.formType?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[3]||(t[3]=(...e)=>u.handleDeleteOperationForm&&u.handleDeleteOperationForm(...e))}," Xóa ")):(0,a.kq)("",!0),"update"==h.formType?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[4]||(t[4]=e=>u.handleUpdateProductionType(this.$refs.ruleFormRef))}," Cập nhập ")):(0,a.kq)("",!0),"create"==h.formType?((0,a.wg)(),(0,a.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[5]||(t[5]=e=>u.handleCreateOperationForm(this.$refs.ruleFormRef))}," Tạo mới ")):(0,a.kq)("",!0)])])),default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"grid grid-cols-10",ref:"ruleFormRef",model:h.form,"status-icon":"",rules:h.rules,size:"default","label-position":"top"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(w,{label:"Tên",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:h.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>h.form.name=e),disabled:"update"==h.formType},null,8,["modelValue","disabled"])])),_:1}),(0,a.Wm)(w,{label:"Mô tả",prop:"description"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:h.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>h.form.description=e),rows:2,type:"textarea"},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"])])]),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{offset:5},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 my-5 space-x-4 font-sans font-bold text-white rounded-lg shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[7]||(t[7]=(...e)=>u.handleClickCreateOperationType&&u.handleClickCreateOperationType(...e))},[(0,a.Wm)(T,{icon:["fas","plus"],size:"lg"}),c])])),_:1})])),_:1})])),[[_,h.loadingStatus]])}var h=o(2607),u={data(){return{loadingStatus:!1,search:"",tableColumns:[{title:"Tên",value:"name"},{title:"Mô tả",value:"description"}],tableData:[],filterTableData:[],dialogFormVisible:!1,form:{name:"",description:""},formBackUp:null,formType:"update",rules:{name:[{validator:this.checkNameAndDescription,trigger:"blur"}],description:[{validator:this.checkNameAndDescription,trigger:"blur"}]}}},computed:{formTitle(){return"update"==this.formType?"Thông tin chi tiết":"Tạo loại hình sản xuất mới"}},watch:{search(e){this.filterTableData=this.tableData.filter((t=>!e||t.name.toLowerCase().includes(e.toLowerCase())))}},methods:{retrieveData(){this.loadingStatus=!0,h.LS().then((e=>{this.tableData=e.data,this.filterTableData=this.tableData,this.loadingStatus=!1})).catch((e=>console.log(e)))},handleClickCreateOperationType(){this.formType="create",this.resetFormData(),null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formBackUp={name:this.form.name,description:this.form.description},this.dialogFormVisible=!0},handleCreateOperationForm(e){e&&e.validate((e=>{if(!e)return!1;this.$confirm("Tạo mới thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0,h.tp(this.form).then((e=>{this.loadingStatus=!1,this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Thêm mới thành công",type:"success"}),this.retrieveData()})).catch((e=>{this.loadingStatus=!1;let t="";try{t=e.response.data.messages}catch(o){console.log(e)}this.$notify({title:"Đã xảy ra lỗi",message:t,type:"error"})}))})).catch((e=>{console.log(e)}))}))},handleEdit(e,t){null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formType="update",this.form=t,this.formBackUp={name:this.form.name,description:this.form.description},this.dialogFormVisible=!0},handleDeleteOperationForm(e,t){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0,h.Lw(this.form.name).then((e=>{this.loadingStatus=!1,this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.retrieveData()})).catch((e=>{try{this.$notify({title:"Đã xảy ra lỗi",message:e.response.data.messages,type:"error"}),console.log(e.message)}catch(t){console.log(t)}}))})).catch((()=>{}))},handleCancel(){this.form.name==this.formBackUp.name&&this.form.description==this.formBackUp.description?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.name=this.formBackUp.name,this.form.description=this.formBackUp.description),this.dialogFormVisible=!1})).catch((()=>{}))},handleUpdateProductionType(e){e&&e.validate((e=>{if(!e)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0,h._K(this.form).then((e=>{this.loadingStatus=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.retrieveData()})).catch((e=>{this.form.name=this.formBackUp.name,this.form.description=this.formBackUp.description,this.loadingStatus=!1;try{this.$notify({title:"Đã xảy ra lỗi",message:e.response.data.messages,type:"error"}),console.log(e.message)}catch(t){console.log(t)}})),this.dialogFormVisible=!1})).catch((e=>{console.log(e)}))}))},resetFormData(){this.form={name:"",description:""}},checkNameAndDescription(e,t,o){let a=/^\s*$/;return(null==t||a.test(t))&&o(new Error("Vui lòng nhập thông tin này")),o()}},created(){this.retrieveData()}},m=o(89);const p=(0,m.Z)(u,[["render",d]]);var f=p}}]);
//# sourceMappingURL=92.37cf3000.js.map