"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[856],{7856:function(a,t,e){e.r(t),e.d(t,{default:function(){return N}});var i=e(3396);const l={class:"grid grid-cols-10 container bg-[url('@/assets/image/animal-facilities-bg.jpg')] bg-cover"},n={class:"col-start-2 col-span-8 grid grid-cols-10 rounded-[25px] bg-white mt-4 p-5 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"},o=(0,i._)("span",{class:"col-start-3 col-span-7 font-bold text-lg"},"Biểu đồ thống kê tổng số lượng động vật lưu trữ tại các cơ sở",-1),r={key:1,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},s=(0,i._)("span",null,"Bắt đầu",-1),h={class:""},c=(0,i._)("span",null,"Kết thúc",-1),d={key:2,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},m=(0,i._)("span",null,"Bắt đầu",-1),u={class:""},p=(0,i._)("span",null,"Kết thúc",-1),g={key:3,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},y=(0,i._)("span",null,"Bắt đầu",-1),f={class:""},b=(0,i._)("span",null,"Kết thúc",-1),w={class:"col-start-2 col-span-8 pt-[8rem] pb-[4rem]"},D={class:"col-start-1 col-span-4"},C={class:"col-start-5 col-span-6"},F={class:""},k=(0,i._)("span",{class:"text-[16px]"},"Số lượng động vật hiện tại",-1),_={class:"col-start-1 col-span-9"},V={class:"grid grid-cols-16 gap-4"},T={class:"grid grid-cols-16 gap-4"},x=(0,i._)("span",null,"Tạo mới",-1);function Q(a,t,e,Q,v,B){const U=(0,i.up)("stacked-area-chart"),M=(0,i.up)("el-option"),W=(0,i.up)("el-select"),L=(0,i.up)("VueDatePicker"),q=(0,i.up)("el-table-column"),N=(0,i.up)("el-input"),$=(0,i.up)("el-button"),S=(0,i.up)("el-table"),A=(0,i.up)("el-card"),Y=(0,i.up)("el-form-item"),E=(0,i.up)("el-date-picker"),H=(0,i.up)("font-awesome-icon"),z=(0,i.up)("el-form"),K=(0,i.up)("el-dialog"),j=(0,i.up)("el-col"),O=(0,i.up)("el-row"),X=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",n,[o,0!=v.chartData.size?((0,i.wg)(),(0,i.j4)(U,{key:0,class:"col-start-3 col-span-7 h-[500px] mt-5","chart-label":v.chartLabel,"chart-data":v.chartData},null,8,["chart-label","chart-data"])):(0,i.kq)("",!0),(0,i.Wm)(W,{modelValue:v.dataType,"onUpdate:modelValue":t[0]||(t[0]=a=>v.dataType=a),class:"mt-[3rem] mr-3 col-start-3 col-span-1",placeholder:"Select",size:"large"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(v.dataTypes,(a=>((0,i.wg)(),(0,i.j4)(M,{key:a.label,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"month"==v.dataType?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",null,[s,(0,i.Wm)(L,{modelValue:v.beginMonth,"onUpdate:modelValue":t[1]||(t[1]=a=>v.beginMonth=a),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",h,[c,(0,i.Wm)(L,{modelValue:v.endMonth,"onUpdate:modelValue":t[2]||(t[2]=a=>v.endMonth=a),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"quarter"==v.dataType?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",null,[m,(0,i.Wm)(L,{modelValue:v.beginQuarter,"onUpdate:modelValue":t[3]||(t[3]=a=>v.beginQuarter=a),"quarter-picker":""},null,8,["modelValue"])]),(0,i._)("div",u,[p,(0,i.Wm)(L,{modelValue:v.endQuarter,"onUpdate:modelValue":t[4]||(t[4]=a=>v.endQuarter=a),"quarter-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"year"==v.dataType?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[y,(0,i.Wm)(L,{modelValue:v.beginYear,"onUpdate:modelValue":t[5]||(t[5]=a=>v.beginYear=a),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",f,[b,(0,i.Wm)(L,{modelValue:v.endYear,"onUpdate:modelValue":t[6]||(t[6]=a=>v.endYear=a),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0)]),(0,i._)("div",w,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{span:24,offset:0},{default:(0,i.w5)((()=>[(0,i.Wm)(A,{class:"h-[530px] rounded-[50px] mb-2",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{data:v.filterFacilitiesTable,class:"h-[530px] w-[93rem]",fit:""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{label:"Mã",prop:"code",align:"center"}),(0,i.Wm)(q,{label:"Tên cơ sở",prop:"name",align:"center"}),(0,i.Wm)(q,{label:"Ngày thành lập",prop:"date",align:"center"}),(0,i.Wm)(q,{label:"Sức chứa",prop:"capacity",align:"center"}),(0,i.Wm)(q,{label:"Trực thuộc (mã)",prop:"administration[code]",align:"center"}),(0,i.Wm)(q,{"min-width":120,align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.search,"onUpdate:modelValue":t[7]||(t[7]=a=>v.search=a),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((a=>[(0,i.Wm)($,{onClick:t=>B.handleClickUpdate(a.$index,a.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,i.Wm)(K,{id:"animalFacilitiesDialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"8vh",modelValue:v.dialogFormVisible,"onUpdate:modelValue":t[22]||(t[22]=a=>v.dialogFormVisible=a),title:B.formTitle,"before-close":B.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",T,["update"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[19]||(t[19]=a=>v.dialogFormVisible=!1)}," Xóa ")):(0,i.kq)("",!0),"update"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[20]||(t[20]=a=>B.handleUpdate(this.$refs.facilitiesForm))}," Cập nhập ")):(0,i.kq)("",!0),"create"==v.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[21]||(t[21]=a=>B.handleCreateAnimalFacility(this.$refs.facilitiesForm))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(z,{class:"grid grid-cols-10 gap-10",ref:"facilitiesForm",model:v.form,"status-icon":"",rules:v.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",D,[(0,i.Wm)(Y,{label:"Mã",prop:"code"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.form.code,"onUpdate:modelValue":t[8]||(t[8]=a=>v.form.code=a),disabled:"update"==v.formType},null,8,["modelValue","disabled"])])),_:1}),(0,i.Wm)(Y,{label:"Tên cơ sở",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.form.name,"onUpdate:modelValue":t[9]||(t[9]=a=>v.form.name=a)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Sức chứa",prop:"capacity"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.form.capacity,"onUpdate:modelValue":t[10]||(t[10]=a=>v.form.capacity=a)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Ngày thành lập",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{modelValue:v.form.date,"onUpdate:modelValue":t[11]||(t[11]=a=>v.form.date=a),type:"date",placeholder:"Chọn ngày thành lập",locale:"vi",size:"default","disabled-date":B.disabledDate},null,8,["modelValue","disabled-date"])])),_:1}),(0,i.Wm)(Y,{label:"Trực thuộc (mã)",prop:"administrationCode"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.form.administrationCode,"onUpdate:modelValue":t[12]||(t[12]=a=>v.form.administrationCode=a)},null,8,["modelValue"])])),_:1})]),(0,i._)("div",C,[(0,i._)("div",F,[k,(0,i._)("button",{class:"ml-[4rem] px-3 py-2 col-span-6 col-start-1 font-sans font-bold text-sm text-white rounded-lg shadow-lg bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[13]||(t[13]=(...a)=>B.handleClickCreateAnimalQuantity&&B.handleClickCreateAnimalQuantity(...a))},[(0,i.Wm)(H,{class:"pr-1",icon:["fas","plus"]}),(0,i.Uk)(" Thêm bản ghi ")])]),(0,i.Wm)(S,{class:"mt-2",data:B.animalQuantityTable,height:"340",border:""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,{prop:"objName",label:"Tên động vật",align:"center"}),(0,i.Wm)(q,{prop:"quantity",label:"Số lượng",align:"center"})])),_:1},8,["data"])])])),_:1},8,["model","rules"]),(0,i.Wm)(K,{class:"w-[25rem] rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",modelValue:v.dialogAnimalFormVisible,"onUpdate:modelValue":t[18]||(t[18]=a=>v.dialogAnimalFormVisible=a),title:"Số lượng động vật","before-close":B.handleCancelInAnimalTable,id:"animalQuantityDialog"},{footer:(0,i.w5)((()=>[(0,i._)("span",V,[(0,i._)("button",{class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[17]||(t[17]=a=>B.handleCreateAnimalQuantity(this.$refs.animalQuantityForm))}," Tạo mới ")])])),default:(0,i.w5)((()=>[(0,i.Wm)(z,{class:"grid grid-cols-10 gap-10",ref:"animalQuantityForm",model:v.animalForm,"status-icon":"",rules:v.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",_,[(0,i.Wm)(Y,{label:"Tên động vật",prop:"animalName"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.animalForm.animalName,"onUpdate:modelValue":t[14]||(t[14]=a=>v.animalForm.animalName=a)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Số lượng",prop:"quantity"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{modelValue:v.animalForm.quantity,"onUpdate:modelValue":t[15]||(t[15]=a=>v.animalForm.quantity=a)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(Y,{label:"Ngày thống kê",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{modelValue:v.animalForm.date,"onUpdate:modelValue":t[16]||(t[16]=a=>v.animalForm.date=a),type:"date",locale:"vi",placeholder:"Chọn ngày thống kê",size:"default","disabled-date":B.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])),_:1},8,["modelValue","title","before-close"])])),_:1})])),_:1})),[[X,v.loadingStatus]]),(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(j,{offset:2},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 mt-3 ml-4 space-x-4 font-sans font-bold text-white rounded-[10px] shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[23]||(t[23]=(...a)=>B.handleClickCreateAnimalFacility&&B.handleClickCreateAnimalFacility(...a))},[(0,i.Wm)(H,{icon:["fas","plus"],size:"lg"}),x])])),_:1})])),_:1})])])),[[X,v.loadingStatus]])}e(560);var v=e(1278),B=e(5039),U=e(3881),M=e(7514),W={name:"animalFacility",components:{StackedAreaChart:v.Z},data(){return{loadingStatus:!1,quarter:(0,U.Z)(new Date),beginMonth:{month:(new Date).getMonth()-6,year:(new Date).getFullYear()},endMonth:{month:(new Date).getMonth()-1,year:(new Date).getFullYear()},beginQuarter:new Date("2023-01-01"),endQuarter:new Date,beginYear:(new Date).getFullYear()-1,endYear:(new Date).getFullYear(),chartLabel:[],chartData:new Map,chartLabelCopy:[],chartDataCopy:new Map,dataTypes:[{value:"month",label:"Tháng"},{value:"quarter",label:"Quý"},{value:"year",label:"Năm"}],dataType:"month",search:"",facilitiesTable:[],filterFacilitiesTable:[],animalQuantityData:null,dialogFormVisible:!1,dialogAnimalFormVisible:!1,form:{code:"",name:"",date:"",capacity:"",administrationCode:""},formBackUp:null,formType:"update",animalForm:{animalName:"",quantity:"",date:""},animalFormBackUp:null,rules:{code:[{validator:this.checkEmptyField,trigger:"blur"}],name:[{validator:this.checkEmptyField,trigger:"blur"}],date:[{validator:this.checkEmptyField,trigger:"blur"}],capacity:[{validator:this.checkCapacity,trigger:"blur"}],administrationCode:[{validator:this.checkEmptyField,trigger:"blur"}],animalName:[{validator:this.checkEmptyField,trigger:"blur"}],quantity:[{validator:this.checkQuantity,trigger:"blur"}]}}},computed:{formatBeginMonth(){if(null!=this.beginMonth){let a=this.beginMonth.month<9?"0"+(this.beginMonth.month+1):this.beginMonth.month+1,t=this.beginMonth.year+"-"+a+"-01";return t}},formatEndMonth(){if(null!=this.endMonth){let a=this.endMonth.month<9?"0"+(this.endMonth.month+1):this.endMonth.month+1,t=this.endMonth.year+"-"+a+"-01";return t}},formatBeginQuarter(){if(null!=this.beginQuarter){let a=this.beginQuarter.getMonth()<9?"0"+(this.beginQuarter.getMonth()+1):this.beginQuarter.getMonth()+1,t=this.beginQuarter.getFullYear()+"-"+a+"-01";return t}},formatEndQuarter(){if(null!=this.endQuarter){let a=this.endQuarter.getMonth()<9?"0"+(this.endQuarter.getMonth()+1):this.endQuarter.getMonth()+1,t=this.endQuarter.getFullYear()+"-"+a+"-01";return t}},formTitle(){return"update"==this.formType?"Cập nhập":"Tạo mới"},animalQuantityTable(){if(null!=this.animalQuantityData&&""!=this.form.code)return this.animalQuantityData.get(this.form.code)}},watch:{dataType(a){"month"==a?this.formatBeginMonth&&null!=this.formatEndMonth&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth)):"quarter"==a?this.formatBeginQuarter&&null!=this.formatEndQuarter&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,this.formatEndQuarter)):this.beginYear&&null!=this.endYear&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,this.endYear))},formatBeginMonth(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(a,this.formatEndMonth))},formatEndMonth(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByMonth(this.formatBeginMonth,a))},formatBeginQuarter(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(a,this.formatEndQuarter))},formatEndQuarter(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByQuarter(this.formatBeginQuarter,a))},beginYear(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(a,this.endYear)),console.log(a)},endYear(a){null!=a&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupQuantityDataByYear(this.beginYear,a)),console.log(a)},search(a){this.filterFacilitiesTable=this.facilitiesTable.filter((t=>!a||t.name.toLowerCase().includes(a.toLowerCase())))}},methods:{setupQuantityDataByMonth(a,t){this.loadingStatus=!0,B.LJ(a,t).then((a=>{for(let t=0;t<=a.data.length-1;t++){let e=a.data[t].date.slice(0,7);this.chartLabel.push(e);for(let i=0;i<a.data[t].data.length;i++)if(this.chartData.has(a.data[t].data[i].facilitiesName)){let e=this.chartData.get(a.data[t].data[i].facilitiesName);e.push(a.data[t].data[i].quantity),this.chartData.set(a.data[t].data[i].facilitiesName,e)}else{let e=[];for(let a=0;a<t;a++)e.push(0);e.push(a.data[t].data[i].quantity),this.chartData.set(a.data[t].data[i].facilitiesName,e)}}this.loadingStatus=!1})).catch((a=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let t="";try{t=a.response.data.messages}catch(a){console.log(a)}this.$notify({title:"Đã xảy ra lỗi",message:t,type:"error"})}))},setupQuantityDataByQuarter(a,t){this.loadingStatus=!0,B.TC(a,t).then((a=>{for(let t=0;t<=a.data.length-1;t++){let e=a.data[t].quarter;this.chartLabel.push(e);for(let i=0;i<a.data[t].data.length;i++)if(this.chartData.has(a.data[t].data[i].facilitiesName)){let e=this.chartData.get(a.data[t].data[i].facilitiesName);e.push(a.data[t].data[i].quantity),this.chartData.set(a.data[t].data[i].facilitiesName,e)}else this.chartData.set(a.data[t].data[i].facilitiesName,[a.data[t].data[i].quantity])}this.loadingStatus=!1})).catch((a=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let t="";try{t=a.response.data.messages}catch(a){console.log(a)}this.$notify({title:"Đã xảy ra lỗi",message:t,type:"error"})}))},setupQuantityDataByYear(a,t){this.loadingStatus=!0,B.Hw(a,t).then((a=>{for(let t=0;t<=a.data.length-1;t++){let e=a.data[t].year;this.chartLabel.push(e);for(let i=0;i<a.data[t].data.length;i++)if(this.chartData.has(a.data[t].data[i].facilitiesName)){let e=this.chartData.get(a.data[t].data[i].facilitiesName);e.push(a.data[t].data[i].quantity),this.chartData.set(a.data[t].data[i].facilitiesName,e)}else this.chartData.set(a.data[t].data[i].facilitiesName,[a.data[t].data[i].quantity])}this.loadingStatus=!1})).catch((a=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let t="";try{t=a.response.data.messages}catch(a){console.log(a)}this.$notify({title:"Đã xảy ra lỗi",message:t,type:"error"})}))},formatQuarter(a){return console.log(a),(0,M.Z)(a,"QQQ")},setupFacilities(){this.loadingStatus=!0,B.Jz().then((a=>{this.facilitiesTable=a.data,this.filterFacilitiesTable=this.facilitiesTable,this.loadingStatus=!1})).catch((a=>{console.log(a)}))},setupAnimalQuantity(){this.loadingStatus=!0,B.$y().then((a=>{this.animalQuantityData=new Map(Object.entries(a.data)),this.loadingStatus=!1})).catch((a=>{}))},handleClickUpdate(a,t){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="update",this.form=t,this.form.administrationCode=t.administration.code,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleUpdate(a){a&&a.validate((a=>{if(!a)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const a=this.$loading({target:this.$el.querySelector("#animalFacilitiesDialog")});let t={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,adminstrationCode:this.form.administrationCode,detail:""};B.QB(t).then((t=>{a.close(),this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.dialogFormVisible=!1,this.setupFacilities()})).catch((t=>{a.close();try{this.$notify({title:"Đã xảy ra lỗi",message:t.response.data.messages,type:"error"}),console.log(t.message)}catch(e){console.log(e)}}))})).catch((a=>{}))}))},handleCancel(){null!=this.form&&null!=this.formBackUp&&(this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.date==this.formBackUp.date&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationCode==this.formBackUp.administrationCode?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.date=this.formBackUp.date,this.form.capacity=this.formBackUp.capacity,this.form.administrationCode=this.formBackUp.administrationCode),this.dialogFormVisible=!1})).catch((()=>{})))},handleCancelInAnimalTable(){null!=this.animalFormBackUp&&null!=this.animalForm&&(this.animalForm.animalName==this.animalFormBackUp.animalName&&this.animalForm.quantity==this.animalFormBackUp.quantity?this.dialogAnimalFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.animalFormBackUp&&(this.animalForm.animalName=this.animalFormBackUp.animalName,this.animalForm.quantity=this.animalFormBackUp.quantity),this.dialogAnimalFormVisible=!1})).catch((()=>{}))),this.dialogAnimalFormVisible=!1},handleClickCreateAnimalFacility(){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="create",this.resetFormData(),this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleCreateAnimalFacility(a){a&&a.validate((a=>{a&&this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const a=this.$loading({target:this.$el.querySelector("#animalFacilitiesDialog")});let t={code:this.form.code,name:this.form.name,date:Date.now(),capacity:this.form.capacity,adminstrationCode:this.form.administrationCode,detail:""};B.hI(t).then((t=>{a.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",type:"success",message:"Tạo mới thành công"}),this.setupFacilities()})).catch((t=>{a.close();try{let a="";a=t.response.data.messages,this.$notify({title:"Đã xảy ra lỗi",type:"error",message:a})}catch(e){}}))})).catch((()=>{}))}))},handleClickCreateAnimalQuantity(){null!=this.$refs.animalQuantityForm&&this.$refs.animalQuantityForm.clearValidate(),this.resetAnimalFormData(),this.animalFormBackUp={animalName:this.animalForm.animalName,quantity:this.animalForm.quantity},this.dialogAnimalFormVisible=!0},handleCreateAnimalQuantity(a){a&&a.validate((a=>{if(!a)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const a=this.$loading({target:this.$el.querySelector("#animalQuantityDialog")});let t={codeASF:this.form.code,nameAS:this.animalForm.animalName,quantity:this.animalForm.quantity,date:this.animalForm.date};a.close(),B.jD(t).then((a=>{this.dialogAnimalFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.setupAnimalQuantity()})).catch((t=>{a.close();let e="";try{e=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:e,type:"error"})}))})).catch((a=>{console.log(a)}))}))},resetFormData(){this.form={code:"",name:"",date:"",capacity:1,administrationCode:""}},resetAnimalFormData(){this.animalForm={animalName:"",quantity:1}},checkEmptyField(a,t,e){return null==t||/^\s*$/.test(t)?e(new Error("Vui lòng nhập thông tin này")):e()},checkQuantity(a,t,e){let i=/^\s*$/;return i.test(t)||isNaN(t)?e(new Error("Giá trị của thông tin này phải là số nguyên")):e()},checkCapacity(a,t,e){let i=/^\s*$/;return i.test(t)||isNaN(t)||t<1?e(new Error("Giá trị của thông tin này phải là số nguyên dương")):e()},disabledDate(a){return a>Date.now()}},created(){this.setupQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth),this.setupFacilities(),this.setupAnimalQuantity()}},L=e(89);const q=(0,L.Z)(W,[["render",Q]]);var N=q}}]);
//# sourceMappingURL=856.980c2c30.js.map