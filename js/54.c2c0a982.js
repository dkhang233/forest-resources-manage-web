"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[54],{4155:function(t,e,a){a.d(e,{BN:function(){return n},H$:function(){return r},MR:function(){return l},TD:function(){return c},tX:function(){return o},us:function(){return s},yA:function(){return d}});var i=a(7877);const o=()=>i.x1.get("plant-facilities/plant_seed"),n=t=>i.x1.post(`plant-facilities/plant_seed/${t.name}`,t),r=t=>i.x1.put(`plant-facilities/plant_seed/${t.name}`,t),l=()=>i.x1.get("plant-facilities"),s=t=>i.x1.post(`plant-facilities/${t.code}`,t),c=t=>i.x1.put(`plant-facilities/${t.code}`,t),d=i.v2+"plant-facilities/plant_seed/images/"},2607:function(t,e,a){a.d(e,{DR:function(){return f},JA:function(){return o},LS:function(){return s},Lw:function(){return m},OD:function(){return w},X5:function(){return n},Xo:function(){return l},Xw:function(){return u},_K:function(){return d},gX:function(){return b},id:function(){return h},o5:function(){return r},q:function(){return p},tp:function(){return c},uQ:function(){return g},zj:function(){return y}});var i=a(7877);const o=()=>i.x1.get("wood-facilities/production-type"),n=t=>i.x1.post(`wood-facilities/production-type/${t.woodType}`,t),r=t=>i.x1.put(`wood-facilities/production-type/${t.woodType}`,t),l=t=>i.x1.delete(`wood-facilities/production-type/${t}`),s=()=>i.x1.get("wood-facilities/operation-form"),c=t=>i.x1.post(`wood-facilities/operation-form/${t.name}`,t),d=t=>i.x1.put(`wood-facilities/operation-form/${t.name}`,t),m=t=>i.x1.delete(`wood-facilities/operation-form/${t}`),u=()=>i.x1.get("wood-facilities"),h=t=>i.x1.put(`wood-facilities/${t.code}`,t),p=t=>i.x1.post(`wood-facilities/${t.code}`,t),f=t=>i.x1.put("wood-facilities/production-type/facilities/add",t),g=(t,e)=>i.x1.get(`wood-facilities/production-type/facilities/month/${t}/${e}`),y=(t,e)=>i.x1.get(`wood-facilities/production-type/facilities/quarter/${t}/${e}`),w=(t,e)=>i.x1.get(`wood-facilities/production-type/facilities/year/${t}/${e}`),b=()=>i.x1.get("wood-facilities/production-type/facilities/now")},9054:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var i=a(3396);const o={class:"container bg-[url('@/assets/image/seed-facilities-bg.jpg')] bg-cover"},n={class:"grid grid-cols-20 px-[9rem] pt-[3rem]"},r={class:"col-start-3"},l={class:"col-start-1 col-span-10"},s={class:"grid grid-cols-16 gap-4"},c=(0,i._)("span",null,"Tạo mới",-1);function d(t,e,a,d,m,u){const h=(0,i.up)("el-table-column"),p=(0,i.up)("el-input"),f=(0,i.up)("el-button"),g=(0,i.up)("el-table"),y=(0,i.up)("el-card"),w=(0,i.up)("el-form-item"),b=(0,i.up)("el-form"),x=(0,i.up)("el-dialog"),k=(0,i.up)("font-awesome-icon"),T=(0,i.up)("el-col"),C=(0,i.up)("el-row"),$=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("p",o,[(0,i._)("div",n,[(0,i._)("div",r,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(y,{class:"h-[550px] w-[64rem] rounded-3xl",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{data:m.filterTableData,class:"h-[520px] break-normal",style:{"--el-table-row-hover-bg-color":"#D0D3D4"},fit:""},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{label:"Mã",prop:"code",align:"center"}),(0,i.Wm)(h,{label:"Tên",prop:"name",align:"center","min-width":"150"}),(0,i.Wm)(h,{label:"Ngày thành lập",prop:"date",align:"center","min-width":"100"}),(0,i.Wm)(h,{label:"Sức chứa",prop:"capacity",align:"center"}),(0,i.Wm)(h,{label:"Trực thuộc (mã)",prop:"administration[code]",align:"center","min-width":"100"}),(0,i.Wm)(h,{"min-width":"150",align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.search,"onUpdate:modelValue":e[0]||(e[0]=t=>m.search=t),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((t=>[(0,i.Wm)(f,{onClick:e=>u.handleClickUpdate(t.$index,t.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[$,m.loadingStatus]]),(0,i.Wm)(x,{id:"dialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"4vh",modelValue:m.dialogFormVisible,"onUpdate:modelValue":e[9]||(e[9]=t=>m.dialogFormVisible=t),title:u.formTitle,"before-close":u.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",s,["update"==m.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[6]||(e[6]=(...t)=>u.handleDeleteOperationForm&&u.handleDeleteOperationForm(...t))}," Xóa ")):(0,i.kq)("",!0),"update"==m.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[7]||(e[7]=t=>u.handleUpdateFacility(this.$refs.ruleFormRef))}," Cập nhập ")):(0,i.kq)("",!0),"create"==m.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[8]||(e[8]=t=>u.handleCreateFacility(this.$refs.ruleFormRef))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"grid grid-cols-10",ref:"ruleFormRef",model:m.form,"status-icon":"",rules:m.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i.Wm)(w,{label:"Mã",prop:"code"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.form.code,"onUpdate:modelValue":e[1]||(e[1]=t=>m.form.code=t),disabled:"update"==m.formType},null,8,["modelValue","disabled"])])),_:1}),(0,i.Wm)(w,{label:"Tên",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.form.name,"onUpdate:modelValue":e[2]||(e[2]=t=>m.form.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(w,{label:"Ngày thành lập",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.form.date,"onUpdate:modelValue":e[3]||(e[3]=t=>m.form.date=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(w,{label:"Sức chứa",prop:"capacity"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.form.capacity,"onUpdate:modelValue":e[4]||(e[4]=t=>m.form.capacity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(w,{label:"Trực thuộc (mã)",prop:"administrationCode"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{modelValue:m.form.administrationCode,"onUpdate:modelValue":e[5]||(e[5]=t=>m.form.administrationCode=t)},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"])])]),(0,i.Wm)(C,null,{default:(0,i.w5)((()=>[(0,i.Wm)(T,{offset:5},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 my-5 space-x-4 font-sans font-bold text-white rounded-lg shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[10]||(e[10]=(...t)=>u.handleClickCreateFacility&&u.handleClickCreateFacility(...t))},[(0,i.Wm)(k,{icon:["fas","plus"],size:"lg"}),c])])),_:1})])),_:1})])}var m=a(2607),u=a(4155),h={data(){return{loadingStatus:!1,search:"",tableData:[],filterTableData:[],dialogFormVisible:!1,form:{code:"",name:"",date:"",capacity:1,administrationCode:""},formBackUp:null,formType:"update",rules:{name:[{validator:this.checkEmptyField,trigger:"blur"}],code:[{validator:this.checkEmptyField,trigger:"blur"}],date:[{validator:this.checkEmptyField,trigger:"blur"}],capacity:[{validator:this.checkCapacity,trigger:"blur"}],administrationCode:[{validator:this.checkEmptyField,trigger:"blur"}]}}},computed:{formTitle(){return"update"==this.formType?"Thông tin chi tiết":"Tạo mới"}},watch:{search(t){this.filterTableData=this.tableData.filter((e=>!t||e.name.toLowerCase().includes(t.toLowerCase())))}},methods:{retrieveData(){this.loadingStatus=!0,u.MR().then((t=>{this.tableData=t.data,this.filterTableData=this.tableData,this.loadingStatus=!1})).catch((t=>console.log(t)))},handleClickCreateFacility(){this.formType="create",this.resetFormData(),null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleCreateFacility(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Tạo mới thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#dialog")});u.us(this.form).then((e=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Thêm mới thành công",type:"success"}),this.retrieveData()})).catch((e=>{t.close();let a="";try{a=e.response.data.messages}catch(i){console.log(e)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))})).catch((t=>{}))}))},handleClickUpdate(t,e){null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formType="update",this.form=e,this.form.administrationCode=e.administration.code,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleUpdateFacility(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#dialog")});u.TD(this.form).then((e=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.retrieveData()})).catch((e=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:e.response.data.messages,type:"error"}),console.log(e.message)}catch(a){console.log(a)}}))})).catch((t=>{}))}))},handleDeleteOperationForm(t,e){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0,m.Lw(this.form.name).then((t=>{this.loadingStatus=!1,this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.retrieveData()})).catch((t=>{try{this.$notify({title:"Đã xảy ra lỗi",message:t.response.data.messages,type:"error"}),console.log(t.message)}catch(e){console.log(e)}}))})).catch((()=>{}))},handleCancel(){this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationCode==this.formBackUp.administrationCode?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.capacity=this.formBackUp.capacity,this.form.administrationCode=this.formBackUp.administrationCode),this.dialogFormVisible=!1})).catch((()=>{}))},resetFormData(){this.form={code:"",name:"",date:"",capacity:"",administrationCode:""}},checkEmptyField(t,e,a){let i=/^\s*$/;return(null==e||i.test(e))&&a(new Error("Vui lòng nhập thông tin này")),a()},checkCapacity(t,e,a){let i=/^\s*$/;return i.test(e)||isNaN(e)||e<0?a(new Error("Giá trị của thông tin này phải là số nguyên lớn hơn hoặc bằng 0")):a()}},created(){this.retrieveData()}},p=a(89);const f=(0,p.Z)(h,[["render",d]]);var g=f}}]);
//# sourceMappingURL=54.c2c0a982.js.map