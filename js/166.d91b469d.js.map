{"version":3,"file":"js/166.d91b469d.js","mappings":"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","sources":["webpack://forest-resources-manage-application/./src/api/administration.js","webpack://forest-resources-manage-application/./src/components/administration/Administration.vue","webpack://forest-resources-manage-application/./src/components/administration/Administration.vue?d379"],"sourcesContent":["import { apiClient } from \"./index\"\r\n\r\nexport const retrieveAllAdministrations = () => apiClient.get(`administrations`)\r\n\r\nexport const retrieveSubAdministrationsWithHierarchy = (code) => apiClient.get(`administrations/${code}/sub`)\r\n\r\nexport const retrieveAdministrationByName = (name) => apiClient.get(`administrations/name/${name}`)\r\n\r\nexport const updateAdministration  = (code,administration) => apiClient.post(`administrations/${code}`,administration)","<template>\r\n    <div class=\"m-5\">\r\n        <div>\r\n            <el-card class=\"administrations w-[50%] h-[35rem]\" v-loading=\"loadingStatus\">\r\n                <template #header>\r\n                    <font-awesome-icon :icon=\"['fas', 'magnifying-glass']\" flip=\"horizontal\" size=\"lg\" />\r\n                    <el-input :offset=\"2\" v-model=\"filterText\" placeholder=\"Tìm kiếm đơn vị hành chính theo tên hoặc mã\"\r\n                        class=\"form\" />\r\n                </template>\r\n                <el-tree-v2 default-expand-all ref=\"treeRef\" class=\"el-tree\" :data=\"treeData\" :props=\"defaultProps\"\r\n                    :item-size=\"50\" :expand-on-click-node=\"false\" :filter-method=\"filterNode\" :height=\"500\">\r\n                    <template #default=\"{ node, data }\">\r\n                        <span class=\"custom-tree-node\">\r\n                            <span>{{ `${node.label} (${data.code})` }}</span>\r\n                            <a class=\"text-blue-500 ml-[80%] hover:text-blue-300\" @click=\"showNode(data)\">Chi\r\n                                tiết</a>\r\n                        </span>\r\n                    </template>\r\n                </el-tree-v2>\r\n            </el-card>\r\n        </div>\r\n        <img class=\"absolute top-0 bottom-0 right-0 left-[50rem] h-[38rem] w-[38%]\"\r\n            src=\"@/assets/image/vietnam_map.png\" />\r\n        <el-dialog v-model=\"dialogFormVisible\" title=\"Thông tin đơn vị hành chính\">\r\n            <el-form ref=\"ruleFormRef\" :model=\"form\" status-icon :rules=\"rules\">\r\n                <el-form-item label=\"Mã\" prop=\"code\">\r\n                    <el-input v-model=\"form.code\" autocomplete=\"off\" disabled />\r\n                </el-form-item>\r\n                <el-form-item label=\"Cấp Hành Chính\" prop=\"level\">\r\n                    <el-select v-model=\"form.level\" placeholder=\"Chọn cấp hành chính\">\r\n                        <el-option label=\"xã\" value=\"xã\" />\r\n                        <el-option label=\"thị trấn\" value=\"thị trấn\" />\r\n                        <el-option label=\"huyện\" value=\"huyện\" />\r\n                        <el-option label=\"thành phố\" value=\"thành phố\" />\r\n                        <el-option label=\"tỉnh\" value=\"tỉnh\" />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"Tên\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"Trực thuộc\" prop=\"sub\">\r\n                    <el-input v-model=\"form.subCode\" autocomplete=\"off\" />\r\n                </el-form-item>\r\n            </el-form>\r\n            <template #footer>\r\n                <span class=\"grid grid-cols-6 gap-4\">\r\n                    <!-- <button class=\"p-2 mr-5 space-x-[100px] font-sans font-bold \r\n                        text-white rounded-lg shadow-lg \r\n                        px-5 bg-red-500 shadow-blue-100 \r\n                        hover:bg-opacity-90  hover:shadow-lg \r\n                        border transition hover:-translate-y-0.5 duration-150\" @click=\"deleteBtn\">\r\n                        Xóa\r\n                    </button> -->\r\n                    <button class=\"p-2 mr-3 col-start-5 font-sans font-bold\r\n                        text-white rounded-lg shadow-lg \r\n                        px-5 bg-[#839192] shadow-blue-100 \r\n                        hover:bg-opacity-90  hover:shadow-lg \r\n                        border transition hover:-translate-y-0.5 duration-150\" @click=\"dialogFormVisible = false\">\r\n                        Quay lại\r\n                    </button>\r\n                    <button class=\" p-2 col-start-6  font-sans font-bold\r\n                        text-white rounded-lg shadow-lg px-5 bg-blue-500 \r\n                        shadow-blue-100 hover:bg-opacity-90  hover:shadow-lg \r\n                        border transition hover:-translate-y-0.5 duration-150\"\r\n                        @click=\"updateBtn(this.$refs.ruleFormRef)\">\r\n                        Cập nhập\r\n                    </button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { retrieveSubAdministrationsWithHierarchy, updateAdministration } from \"../../api/administration\"\r\nimport { mapStores } from 'pinia'\r\nimport { useUserStore } from \"../../stores/user-store\"\r\nimport Map from \"@/components/map/Map\";\r\nexport default {\r\n    components: {\r\n        Map\r\n    },\r\n    data() {\r\n        return {\r\n            defaultProps: {\r\n                value: `code`,\r\n                children: `children`,\r\n                label: `fullName`,\r\n            },\r\n            filterText: \"\",\r\n            treeData: [],\r\n            dialogFormVisible: false,\r\n            form: {\r\n                code: \"\",\r\n                level: \"\",\r\n                name: \"\",\r\n                subCode: \"\",\r\n            },\r\n            rules: {\r\n                name: [{ validator: this.checkAdministrationName, trigger: 'change' }, { validator: this.checkAdministrationSub, trigger: 'change' }]\r\n            },\r\n            loadingStatus: false\r\n        }\r\n    },\r\n    watch: {\r\n        filterText(val) {\r\n            this.$refs.treeRef.filter(val)\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapStores(useUserStore)\r\n    },\r\n    methods: {\r\n        filterNode(value, dataa) {\r\n            console.log(dataa)\r\n            if (!value) return true\r\n            return dataa.fullName.includes(value) || dataa.code.includes(value)\r\n        },\r\n        showNode(node) {\r\n            this.form.code = node.code\r\n            this.form.name = node.name\r\n            this.form.level = node.levelName\r\n            this.form.subCode = node.subordinateCode\r\n            this.dialogFormVisible = true\r\n        },\r\n        checkAdministrationName(rule, value, callback) {\r\n            if (!value) {\r\n                return callback(new Error('Vui lòng nhập mã hành chính'))\r\n            }\r\n            else {\r\n                callback()\r\n            }\r\n        },\r\n        checkAdministrationSub(rule, value, callback) {\r\n            if (!value) {\r\n                return callback(new Error('Vui lòng trực thuộc'))\r\n            }\r\n            else {\r\n                callback()\r\n            }\r\n        },\r\n        updateBtn(formEl) {\r\n            if (!formEl) return\r\n            formEl.validate((valid) => {\r\n                if (valid) {\r\n                    this.$confirm(\r\n                        'Cập nhập đơn vị hành chính này. Tiếp tục?',\r\n                        'Xác nhận',\r\n                        {\r\n                            confirmButtonText: 'OK',\r\n                            cancelButtonText: 'Hủy',\r\n                            type: 'warning',\r\n                        }\r\n                    )\r\n                        .then(() => {\r\n                            this.updateAdministration()\r\n                            this.dialogFormVisible = false\r\n                        })\r\n                        .catch(() => {\r\n                        })\r\n                } else {\r\n                    console.log('error submit!')\r\n                    return false\r\n                }\r\n            })\r\n        },\r\n        deleteBtn() {\r\n            this.$confirm(\r\n                'Xóa đơn vị hành chính này. Tiếp tục?',\r\n                'Cảnh báo',\r\n                {\r\n                    confirmButtonText: 'OK',\r\n                    cancelButtonText: 'Hủy',\r\n                    type: 'warning',\r\n                }\r\n            )\r\n                .then(() => {\r\n                    this.dialogFormVisible = false\r\n                    this.$notify({\r\n                        title: 'Thành công',\r\n                        message: 'Xóa thành công',\r\n                        type: 'success'\r\n                    })\r\n                })\r\n                .catch(() => {\r\n                })\r\n        },\r\n        retrieveAdministrations() {\r\n            this.loadingStatus = true\r\n            retrieveSubAdministrationsWithHierarchy(35)\r\n                .then((res) => {\r\n                    this.treeData = res.data\r\n                    this.loadingStatus = false\r\n                })\r\n                .catch(err => console.log(err));\r\n        },\r\n        updateAdministration() {\r\n            this.loadingStatus = true\r\n            updateAdministration(this.form.code, {\r\n                name: this.form.name,\r\n                subordinateCode: this.form.subCode,\r\n                administrativeLevelName: this.form.level\r\n            })\r\n                .then(\r\n                    (res) => {\r\n                        this.loadingStatus = false\r\n                        this.$notify({\r\n                            title: 'Thành công',\r\n                            message: 'Cập nhập thành công',\r\n                            type: 'success'\r\n                        })\r\n                        this.retrieveAdministrations()\r\n                    }\r\n                )\r\n                .catch(\r\n                    (err) => {\r\n                        this.loadingStatus = false\r\n                        let message = ''\r\n                        try {\r\n                            message = err.response.data.messages\r\n                            this.$notify({\r\n                                title: 'Đã xảy ra lỗi',\r\n                                message: message,\r\n                                type: 'error',\r\n                            })\r\n                        } catch (error) {\r\n\r\n                        }\r\n                        console.log(err)\r\n                    }\r\n                )\r\n\r\n        }\r\n    },\r\n    created() {\r\n        this.retrieveAdministrations()\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.form {\r\n    margin: 0px 0px 0px 20px;\r\n    width: 400px;\r\n}\r\n\r\n.el-tree {\r\n    --el-tree-node-hover-bg-color: #D0D3D4;\r\n    font-size: 20px !important;\r\n}\r\n</style>\r\n","import { render } from \"./Administration.vue?vue&type=template&id=6acac832&scoped=true\"\nimport script from \"./Administration.vue?vue&type=script&lang=js\"\nexport * from \"./Administration.vue?vue&type=script&lang=js\"\n\nimport \"./Administration.vue?vue&type=style&index=0&id=6acac832&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6acac832\"]])\n\nexport default __exports__"],"names":["retrieveSubAdministrationsWithHierarchy","code","apiClient","get","updateAdministration","administration","post","class","_createElementVNode","src","_imports_0","_createElementBlock","_hoisted_1","_createBlock","_component_el_card","header","_withCtx","_createVNode","_component_font_awesome_icon","icon","flip","size","_component_el_input","offset","$data","filterText","$event","placeholder","_component_el_tree_v2","ref","data","treeData","props","defaultProps","$options","filterNode","height","default","node","_hoisted_2","_toDisplayString","label","onClick","showNode","_hoisted_3","loadingStatus","_hoisted_4","_component_el_dialog","dialogFormVisible","title","footer","_hoisted_5","_cache","updateBtn","this","$refs","ruleFormRef","_component_el_form","model","form","rules","_component_el_form_item","prop","autocomplete","disabled","_component_el_select","level","_component_el_option","value","name","subCode","components","Map","children","validator","checkAdministrationName","trigger","checkAdministrationSub","watch","val","treeRef","filter","computed","mapStores","useUserStore","methods","dataa","console","log","fullName","includes","levelName","subordinateCode","rule","callback","Error","formEl","validate","valid","$confirm","confirmButtonText","cancelButtonText","type","then","catch","deleteBtn","$notify","message","retrieveAdministrations","res","err","administrativeLevelName","response","messages","error","created","__exports__","render"],"sourceRoot":""}