"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[393],{4155:function(t,e,i){i.d(e,{$o:function(){return m},BN:function(){return n},G8:function(){return h},H$:function(){return l},MR:function(){return s},O$:function(){return r},TD:function(){return d},Xm:function(){return p},dL:function(){return u},tX:function(){return o},us:function(){return c},yA:function(){return f}});var a=i(7877);const o=()=>a.x1.get("plant-facilities/plant_seed"),n=t=>a.x1.post(`plant-facilities/plant_seed/${t.name}`,t),l=t=>a.x1.put(`plant-facilities/plant_seed/${t.name}`,t),r=t=>a.x1.delete(`plant-facilities/plant_seed/${t}`),s=()=>a.x1.get("plant-facilities"),c=t=>a.x1.post(`plant-facilities/${t.code}`,t),d=t=>a.x1.put(`plant-facilities/${t.code}`,t),u=t=>a.x1.delete(`plant-facilities/${t}`),m=()=>a.x1.get("plant-facilities/coordinates"),h=t=>a.x1.put("plant-facilities/coordinates",t),p=t=>a.x1.delete(`plant-facilities/coordinates/${t}`),f=a.v2+"plant-facilities/plant_seed/images/"},2607:function(t,e,i){i.d(e,{$o:function(){return $},DR:function(){return g},G8:function(){return k},JA:function(){return o},LS:function(){return s},Lw:function(){return u},OD:function(){return b},SM:function(){return f},X5:function(){return n},Xm:function(){return C},Xo:function(){return r},Xw:function(){return m},_K:function(){return d},gX:function(){return x},id:function(){return h},o5:function(){return l},q:function(){return p},tp:function(){return c},uQ:function(){return y},zj:function(){return w}});var a=i(7877);const o=()=>a.x1.get("wood-facilities/production-type"),n=t=>a.x1.post(`wood-facilities/production-type/${t.woodType}`,t),l=t=>a.x1.put(`wood-facilities/production-type/${t.woodType}`,t),r=t=>a.x1.delete(`wood-facilities/production-type/${t}`),s=()=>a.x1.get("wood-facilities/operation-form"),c=t=>a.x1.post(`wood-facilities/operation-form/${t.name}`,t),d=t=>a.x1.put(`wood-facilities/operation-form/${t.name}`,t),u=t=>a.x1.delete(`wood-facilities/operation-form/${t}`),m=()=>a.x1.get("wood-facilities"),h=t=>a.x1.put(`wood-facilities/${t.code}`,t),p=t=>a.x1.post(`wood-facilities/${t.code}`,t),f=t=>a.x1.delete(`wood-facilities/${t}`),g=t=>a.x1.put("wood-facilities/production-type/facilities/add",t),y=(t,e)=>a.x1.get(`wood-facilities/production-type/facilities/month/${t}/${e}`),w=(t,e)=>a.x1.get(`wood-facilities/production-type/facilities/quarter/${t}/${e}`),b=(t,e)=>a.x1.get(`wood-facilities/production-type/facilities/year/${t}/${e}`),x=()=>a.x1.get("wood-facilities/production-type/facilities/now"),$=()=>a.x1.get("wood-facilities/coordinates"),k=t=>a.x1.put("wood-facilities/coordinates",t),C=t=>a.x1.delete(`wood-facilities/coordinates/${t}`)},1393:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var a=i(3396);const o={class:"container bg-[url('@/assets/image/seed-facilities-bg.jpg')] bg-cover"},n={class:"grid grid-cols-20 px-[9rem] pt-[3rem]"},l={class:"col-start-3"},r={class:"col-start-1 col-span-10"},s={class:"grid grid-cols-16 gap-4"},c=(0,a._)("span",null,"Tạo mới",-1);function d(t,e,i,d,u,m){const h=(0,a.up)("el-table-column"),p=(0,a.up)("el-input"),f=(0,a.up)("el-button"),g=(0,a.up)("el-table"),y=(0,a.up)("el-card"),w=(0,a.up)("el-form-item"),b=(0,a.up)("el-date-picker"),x=(0,a.up)("el-form"),$=(0,a.up)("el-dialog"),k=(0,a.up)("font-awesome-icon"),C=(0,a.up)("el-col"),T=(0,a.up)("el-row"),_=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("p",o,[(0,a._)("div",n,[(0,a._)("div",l,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{class:"h-[550px] w-[64rem] rounded-3xl",shadow:"always"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{data:u.filterTableData,class:"h-[520px] break-normal",style:{"--el-table-row-hover-bg-color":"#D0D3D4"},fit:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"Mã",prop:"code",align:"center"}),(0,a.Wm)(h,{label:"Tên",prop:"name",align:"center","min-width":"150"}),(0,a.Wm)(h,{label:"Ngày thành lập",prop:"date",align:"center","min-width":"100"}),(0,a.Wm)(h,{label:"Sức chứa",prop:"capacity",align:"center"}),(0,a.Wm)(h,{label:"Trực thuộc (mã)",prop:"administration[code]",align:"center","min-width":"100"}),(0,a.Wm)(h,{"min-width":"150",align:"center"},{header:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.search,"onUpdate:modelValue":e[0]||(e[0]=t=>u.search=t),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,a.w5)((t=>[(0,a.Wm)(f,{onClick:e=>m.handleClickUpdate(t.$index,t.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[_,u.loadingStatus]]),(0,a.Wm)($,{id:"dialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"4vh",modelValue:u.dialogFormVisible,"onUpdate:modelValue":e[9]||(e[9]=t=>u.dialogFormVisible=t),title:m.formTitle,"before-close":m.handleCancel},{footer:(0,a.w5)((()=>[(0,a._)("span",s,["update"==u.formType?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[6]||(e[6]=(...t)=>m.handleDelete&&m.handleDelete(...t))}," Xóa ")):(0,a.kq)("",!0),"update"==u.formType?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[7]||(e[7]=t=>m.handleUpdateFacility(this.$refs.ruleFormRef))}," Cập nhập ")):(0,a.kq)("",!0),"create"==u.formType?((0,a.wg)(),(0,a.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[8]||(e[8]=t=>m.handleCreateFacility(this.$refs.ruleFormRef))}," Tạo mới ")):(0,a.kq)("",!0)])])),default:(0,a.w5)((()=>[(0,a.Wm)(x,{class:"grid grid-cols-10",ref:"ruleFormRef",model:u.form,"status-icon":"",rules:u.rules,size:"default","label-position":"top"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.Wm)(w,{label:"Mã",prop:"code"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.code,"onUpdate:modelValue":e[1]||(e[1]=t=>u.form.code=t),disabled:"update"==u.formType},null,8,["modelValue","disabled"])])),_:1}),(0,a.Wm)(w,{label:"Tên",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.name,"onUpdate:modelValue":e[2]||(e[2]=t=>u.form.name=t)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{label:"Ngày thành lập",prop:"date"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:u.form.date,"onUpdate:modelValue":e[3]||(e[3]=t=>u.form.date=t),type:"date",locale:"vi",placeholder:"Chọn ngày thành lập",size:"default","disabled-date":m.disabledDate},null,8,["modelValue","disabled-date"])])),_:1}),(0,a.Wm)(w,{label:"Sức chứa",prop:"capacity"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.capacity,"onUpdate:modelValue":e[4]||(e[4]=t=>u.form.capacity=t)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{label:"Trực thuộc (mã)",prop:"administrationCode"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.administrationCode,"onUpdate:modelValue":e[5]||(e[5]=t=>u.form.administrationCode=t)},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"])])]),(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{offset:5},{default:(0,a.w5)((()=>[(0,a._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 my-5 space-x-4 font-sans font-bold text-white rounded-lg shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:e[10]||(e[10]=(...t)=>m.handleClickCreateFacility&&m.handleClickCreateFacility(...t))},[(0,a.Wm)(k,{icon:["fas","plus"],size:"lg"}),c])])),_:1})])),_:1})])}i(2607);var u=i(4155),m={data(){return{loadingStatus:!1,search:"",tableData:[],filterTableData:[],dialogFormVisible:!1,form:{code:"",name:"",date:"",capacity:1,administrationCode:""},formBackUp:null,formType:"update",rules:{name:[{validator:this.checkEmptyField,trigger:"blur"}],code:[{validator:this.checkEmptyField,trigger:"blur"}],date:[{validator:this.checkEmptyField,trigger:"blur"}],capacity:[{validator:this.checkCapacity,trigger:"blur"}],administrationCode:[{validator:this.checkEmptyField,trigger:"blur"}]}}},computed:{formTitle(){return"update"==this.formType?"Thông tin chi tiết":"Tạo mới"}},watch:{search(t){this.filterTableData=this.tableData.filter((e=>!t||e.name.toLowerCase().includes(t.toLowerCase())))}},methods:{retrieveData(){this.loadingStatus=!0,u.MR().then((t=>{this.tableData=t.data,this.filterTableData=this.tableData,this.loadingStatus=!1})).catch((t=>console.log(t)))},handleClickCreateFacility(){this.formType="create",this.resetFormData(),null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleCreateFacility(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Tạo mới thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#dialog")});u.us(this.form).then((e=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Thêm mới thành công",type:"success"}),this.retrieveData()})).catch((e=>{t.close();let i="";try{i=e.response.data.messages}catch(a){console.log(e)}this.$notify({title:"Đã xảy ra lỗi",message:i,type:"error"})}))})).catch((t=>{}))}))},handleClickUpdate(t,e){null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formType="update",this.form=e,this.form.administrationCode=e.administration.code,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationCode:this.form.administrationCode},this.dialogFormVisible=!0},handleUpdateFacility(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#dialog")});u.TD(this.form).then((e=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.retrieveData()})).catch((e=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:e.response.data.messages,type:"error"}),console.log(e.message)}catch(i){console.log(i)}}))})).catch((t=>{}))}))},handleDelete(){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const t=this.$loading({target:this.$el.querySelector("#dialog")});u.dL(this.form.code).then((e=>{t.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.retrieveData()})).catch((e=>{t.close();try{this.$notify({title:"Đã xảy ra lỗi",message:e.response.data.messages,type:"error"}),console.log(e.message)}catch(i){console.log(i)}}))})).catch((()=>{}))},handleCancel(){this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationCode==this.formBackUp.administrationCode?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.capacity=this.formBackUp.capacity,this.form.administrationCode=this.formBackUp.administrationCode),this.dialogFormVisible=!1})).catch((()=>{}))},resetFormData(){this.form={code:"",name:"",date:"",capacity:"",administrationCode:""}},checkEmptyField(t,e,i){let a=/^\s*$/;return(null==e||a.test(e))&&i(new Error("Vui lòng nhập thông tin này")),i()},checkCapacity(t,e,i){let a=/^\s*$/;return a.test(e)||isNaN(e)||e<0?i(new Error("Giá trị của thông tin này phải là số nguyên lớn hơn hoặc bằng 0")):i()},disabledDate(t){return t>Date.now()}},created(){this.retrieveData()}},h=i(89);const p=(0,h.Z)(m,[["render",d]]);var f=p}}]);
//# sourceMappingURL=393.3daa4c47.js.map