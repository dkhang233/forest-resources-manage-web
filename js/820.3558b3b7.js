"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[820],{2607:function(e,t,o){o.d(t,{$o:function(){return T},DR:function(){return g},G8:function(){return $},JA:function(){return a},LS:function(){return s},Lw:function(){return u},OD:function(){return b},SM:function(){return f},X5:function(){return r},Xm:function(){return k},Xo:function(){return l},Xw:function(){return h},_K:function(){return d},gX:function(){return x},id:function(){return p},o5:function(){return n},q:function(){return m},tp:function(){return c},uQ:function(){return w},zj:function(){return y}});var i=o(7877);const a=()=>i.x1.get("wood-facilities/production-type"),r=e=>i.x1.post(`wood-facilities/production-type/${e.woodType}`,e),n=e=>i.x1.put(`wood-facilities/production-type/${e.woodType}`,e),l=e=>i.x1.delete(`wood-facilities/production-type/${e}`),s=()=>i.x1.get("wood-facilities/operation-form"),c=e=>i.x1.post(`wood-facilities/operation-form/${e.name}`,e),d=e=>i.x1.put(`wood-facilities/operation-form/${e.name}`,e),u=e=>i.x1.delete(`wood-facilities/operation-form/${e}`),h=()=>i.x1.get("wood-facilities"),p=e=>i.x1.put(`wood-facilities/${e.code}`,e),m=e=>i.x1.post(`wood-facilities/${e.code}`,e),f=e=>i.x1.delete(`wood-facilities/${e}`),g=e=>i.x1.put("wood-facilities/production-type/facilities/add",e),w=(e,t)=>i.x1.get(`wood-facilities/production-type/facilities/month/${e}/${t}`),y=(e,t)=>i.x1.get(`wood-facilities/production-type/facilities/quarter/${e}/${t}`),b=(e,t)=>i.x1.get(`wood-facilities/production-type/facilities/year/${e}/${t}`),x=()=>i.x1.get("wood-facilities/production-type/facilities/now"),T=()=>i.x1.get("wood-facilities/coordinates"),$=e=>i.x1.put("wood-facilities/coordinates",e),k=e=>i.x1.delete(`wood-facilities/coordinates/${e}`)},820:function(e,t,o){o.r(t),o.d(t,{default:function(){return f}});var i=o(3396);const a={class:"container bg-[url('@/assets/image/operation-form-bg.jpg')] bg-cover"},r={class:"grid grid-cols-20 px-[9rem] pt-4"},n={class:"col-start-3"},l={class:"col-start-1 col-span-10"},s={class:"grid grid-cols-16 gap-4"},c=(0,i._)("span",null,"Tạo mới",-1);function d(e,t,o,d,u,h){const p=(0,i.up)("el-table-column"),m=(0,i.up)("el-input"),f=(0,i.up)("el-button"),g=(0,i.up)("el-table"),w=(0,i.up)("el-card"),y=(0,i.up)("el-form-item"),b=(0,i.up)("el-form"),x=(0,i.up)("el-dialog"),T=(0,i.up)("font-awesome-icon"),$=(0,i.up)("el-col"),k=(0,i.up)("el-row"),v=(0,i.Q2)("loading");return(0,i.wg)(),(0,i.iD)("p",a,[(0,i._)("div",r,[(0,i._)("div",n,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{class:"h-[33rem] w-[60rem] rounded-3xl",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{data:u.filterTableData,class:"h-[32rem] break-normal",style:{"--el-table-row-hover-bg-color":"#D0D3D4"},fit:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.tableColumns,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{key:t,label:e.title,prop:e.value,align:"center"},null,8,["label","prop"])))),128)),(0,i.Wm)(p,{"min-width":120,align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)(m,{modelValue:u.search,"onUpdate:modelValue":t[0]||(t[0]=e=>u.search=e),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((e=>[(0,i.Wm)(f,{onClick:t=>h.handleClickUpdate(e.$index,e.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[v,u.loadingStatus]]),(0,i.Wm)(x,{id:"dialog",class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"15vh",modelValue:u.dialogFormVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>u.dialogFormVisible=e),title:h.formTitle,"before-close":h.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",s,["update"==u.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[3]||(t[3]=(...e)=>h.handleDeleteOperationForm&&h.handleDeleteOperationForm(...e))}," Xóa ")):(0,i.kq)("",!0),"update"==u.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[4]||(t[4]=e=>h.handleUpdateProductionType(this.$refs.ruleFormRef))}," Cập nhập ")):(0,i.kq)("",!0),"create"==u.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[5]||(t[5]=e=>h.handleCreateOperationForm(this.$refs.ruleFormRef))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"grid grid-cols-10",ref:"ruleFormRef",model:u.form,"status-icon":"",rules:u.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i.Wm)(y,{label:"Tên",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{modelValue:u.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.name=e),disabled:"update"==u.formType},null,8,["modelValue","disabled"])])),_:1}),(0,i.Wm)(y,{label:"Mô tả",prop:"description"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{modelValue:u.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>u.form.description=e),rows:2,type:"textarea"},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"])])]),(0,i.Wm)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,{offset:5},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 my-5 space-x-4 font-sans font-bold text-white rounded-lg shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:t[7]||(t[7]=(...e)=>h.handleClickCreateOperationType&&h.handleClickCreateOperationType(...e))},[(0,i.Wm)(T,{icon:["fas","plus"],size:"lg"}),c])])),_:1})])),_:1})])}var u=o(2607),h={data(){return{loadingStatus:!1,search:"",tableColumns:[{title:"Tên",value:"name"},{title:"Mô tả",value:"description"}],tableData:[],filterTableData:[],dialogFormVisible:!1,form:{name:"",description:""},formBackUp:null,formType:"update",rules:{name:[{validator:this.checkNameAndDescription,trigger:"blur"}],description:[{validator:this.checkNameAndDescription,trigger:"blur"}]}}},computed:{formTitle(){return"update"==this.formType?"Thông tin chi tiết":"Tạo loại hình sản xuất mới"}},watch:{search(e){this.filterTableData=this.tableData.filter((t=>!e||t.name.toLowerCase().includes(e.toLowerCase())))}},methods:{retrieveData(){this.loadingStatus=!0,u.LS().then((e=>{this.tableData=e.data,this.filterTableData=this.tableData,this.loadingStatus=!1})).catch((e=>console.log(e)))},handleClickCreateOperationType(){this.formType="create",this.resetFormData(),null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formBackUp={name:this.form.name,description:this.form.description},this.dialogFormVisible=!0},handleCreateOperationForm(e){e&&e.validate((e=>{if(!e)return!1;this.$confirm("Tạo mới thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const e=this.$loading({target:this.$el.querySelector("#dialog")});u.tp(this.form).then((t=>{e.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Thêm mới thành công",type:"success"}),this.retrieveData()})).catch((t=>{e.close();let o="";try{o=t.response.data.messages}catch(i){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:o,type:"error"})}))})).catch((e=>{}))}))},handleClickUpdate(e,t){null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formType="update",this.form=t,this.formBackUp={name:this.form.name,description:this.form.description},this.dialogFormVisible=!0},handleUpdateProductionType(e){e&&e.validate((e=>{if(!e)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const e=this.$loading({target:this.$el.querySelector("#dialog")});u._K(this.form).then((t=>{e.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.retrieveData()})).catch((t=>{e.close();try{this.$notify({title:"Đã xảy ra lỗi",message:t.response.data.messages,type:"error"}),console.log(t.message)}catch(o){console.log(o)}}))})).catch((e=>{}))}))},handleDeleteOperationForm(e,t){this.$confirm("Xóa thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{const e=this.$loading({target:this.$el.querySelector("#dialog")});u.Lw(this.form.name).then((t=>{e.close(),this.dialogFormVisible=!1,this.$notify({title:"Thành công",message:"Xóa thành công",type:"success"}),this.retrieveData()})).catch((t=>{e.close();try{this.$notify({title:"Đã xảy ra lỗi",message:t.response.data.messages,type:"error"}),console.log(t.message)}catch(o){console.log(o)}}))})).catch((()=>{}))},handleCancel(){this.form.name==this.formBackUp.name&&this.form.description==this.formBackUp.description?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.name=this.formBackUp.name,this.form.description=this.formBackUp.description),this.dialogFormVisible=!1})).catch((()=>{}))},resetFormData(){this.form={name:"",description:""}},checkNameAndDescription(e,t,o){let i=/^\s*$/;return(null==t||i.test(t))&&o(new Error("Vui lòng nhập thông tin này")),o()}},created(){this.retrieveData()}},p=o(89);const m=(0,p.Z)(h,[["render",d]]);var f=m}}]);
//# sourceMappingURL=820.3558b3b7.js.map