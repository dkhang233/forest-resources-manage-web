"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[899],{899:function(e,a,t){t.r(a),t.d(a,{default:function(){return M}});var l=t(3396),r=t(7139),s=t(9242),o=t(7520);const i={class:"profile-page"},n=(0,l.uE)('<section class="relative block" style="height:500px;"><div class="absolute top-0 w-full h-full bg-center bg-cover" style="background-image:url(&quot;https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=2710&amp;q=80&quot;);"><span id="blackOverlay" class="w-full h-full absolute opacity-50 bg-black"></span></div><div class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden" style="height:70px;"><svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" version="1.1" viewBox="0 0 2560 100" x="0" y="0"><polygon class="text-gray-300 fill-current" points="2560 0 2560 100 0 100"></polygon></svg></div></section>',1),m={class:"relative py-16 bg-gray-300"},d={class:"container mx-auto px-4"},u={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64"},c={class:"px-6"},h={class:"flex flex-wrap justify-center"},p={class:"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center"},f={class:"relative"},g={key:0,alt:"...",src:o,class:"shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16",style:{"max-width":"150px"}},b=["src"],v={class:"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center"},w={class:"py-6 px-3 mt-32 sm:mt-0"},x=(0,l._)("div",{class:"w-full lg:w-4/12 px-4 lg:order-1"},null,-1),y={class:"text-center mt-12"},_={class:"text-4xl font-semibold leading-normal mb-2 text-gray-800"},k={class:"text-sm leading-normal mt-0 mb-2 text-gray-500 font-bold uppercase"},V=(0,l._)("i",{class:"fas fa-map-marker-alt mr-2 text-lg text-gray-500"},null,-1),U={class:"mb-2 text-gray-700 mt-10"},F={class:"font-[600] ml-2 text-lg text-gray-500"},N={class:"mb-2 text-gray-700"},B={class:"font-[600] ml-2 text-lg text-gray-500"},C={class:"mb-2 text-gray-700 mt-2"},S={class:"font-[600] ml-2 text-lg text-gray-500"},D={class:"mb-2 text-gray-700 mt-2"},W={class:"font-[600] ml-2 text-lg text-gray-500"},E=(0,l._)("div",{class:"mt-10 py-10 border-t border-gray-300 text-center"},[(0,l._)("div",{class:"flex flex-wrap justify-center"},[(0,l._)("div",{class:"w-full lg:w-9/12 px-4"},[(0,l._)("p",{class:"mb-4 text-lg leading-relaxed text-gray-800"})])])],-1),$={class:"col-span-3"},I=["src"],z={class:"col-start-5 col-span-10"},q={class:"grid grid-cols-2 gap-5"},T={class:"grid grid-cols-2 gap-5"},j={class:"grid grid-cols-16 gap-4"};function R(e,a,t,R,O,A){const H=(0,l.up)("font-awesome-icon"),K=(0,l.up)("el-form-item"),L=(0,l.up)("el-input"),J=(0,l.up)("el-date-picker"),M=(0,l.up)("el-form"),P=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("main",i,[n,(0,l._)("section",m,[(0,l._)("div",d,[(0,l._)("div",u,[(0,l._)("div",c,[(0,l._)("div",h,[(0,l._)("div",p,[(0,l._)("div",f,[""==e.userStore.avatar?((0,l.wg)(),(0,l.iD)("img",g)):(0,l.kq)("",!0),""!=e.userStore.avatar?((0,l.wg)(),(0,l.iD)("img",{key:1,alt:"...",src:A.avatar,class:"shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16",style:{"max-width":"150px"}},null,8,b)):(0,l.kq)("",!0)])]),(0,l._)("div",v,[(0,l._)("div",w,[(0,l._)("button",{class:"bg-pink-500 active:bg-pink-600 text-white font-bold hover:shadow-md shadow px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1",type:"button",style:{transition:"all 0.15s ease 0s"},onClick:a[0]||(a[0]=(...e)=>A.handleClickEdit&&A.handleClickEdit(...e))}," Chỉnh sửa ")])]),x]),(0,l._)("div",y,[(0,l._)("h3",_,(0,r.zw)(e.userStore.firstName+" "+e.userStore.lastName+" ("+e.userStore.username+")"),1),(0,l._)("div",k,[V,(0,l.Uk)(" "+(0,r.zw)(e.userStore.address),1)]),(0,l._)("div",U,[(0,l.Uk)(" Vai trò:"),(0,l._)("span",F,(0,r.zw)(e.userStore.role),1)]),(0,l._)("div",N,[(0,l.Uk)(" Trực thuộc (mã):"),(0,l._)("span",B,(0,r.zw)(e.userStore.administration),1)]),(0,l._)("div",C,[(0,l.Uk)(" Email:"),(0,l._)("span",S,(0,r.zw)(e.userStore.email),1)]),(0,l._)("div",D,[(0,l.Uk)(" Ngày sinh:"),(0,l._)("span",W,(0,r.zw)(e.userStore.birthDate),1)])]),E])])])]),(0,l.Wm)(P,{class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"2vh",modelValue:O.dialogFormVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>O.dialogFormVisible=e),title:"Chỉnh sửa thông tin tài khoản","before-close":A.handleCancel},{footer:(0,l.w5)((()=>[(0,l._)("span",j,[(0,l._)("button",{class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[10]||(a[10]=e=>A.handleUpdate(this.$refs.ruleFormRef))}," Cập nhập ")])])),default:(0,l.w5)((()=>[(0,l.Wm)(M,{class:"grid grid-cols-10",ref:"ruleFormRef",model:O.form,"status-icon":"",rules:O.rules,size:"default","label-position":"top"},{default:(0,l.w5)((()=>[(0,l._)("div",$,[(0,l.Wm)(K,{class:"",prop:"avatar"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{ref:"uploadInput",onChange:a[1]||(a[1]=(...e)=>A.handleFileChange&&A.handleFileChange(...e)),type:"file"},null,544),[[s.F8,!1]]),""==O.form.avatar?((0,l.wg)(),(0,l.iD)("img",{key:0,onClick:a[2]||(a[2]=(...e)=>A.openFileInput&&A.openFileInput(...e)),class:"rounded-full shadow-lg hover:cursor-pointer hover:opacity-60",src:o})):(0,l.kq)("",!0),""!=O.form.avatar?((0,l.wg)(),(0,l.iD)("img",{key:1,onClick:a[3]||(a[3]=(...e)=>A.openFileInput&&A.openFileInput(...e)),class:"rounded-full shadow-lg",src:A.avatarInForm},null,8,I)):(0,l.kq)("",!0),""!=O.form.avatar?((0,l.wg)(),(0,l.j4)(H,{key:2,class:"shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] p-2 hover:cursor-pointer hover:opacity-60 hover:text-red-600",onClick:A.resetAvatar,icon:["fas","trash-can"],size:"lg"},null,8,["onClick"])):(0,l.kq)("",!0)])),_:1})]),(0,l._)("div",z,[(0,l.Wm)(K,{label:"Username",prop:"username"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:O.form.username,"onUpdate:modelValue":a[4]||(a[4]=e=>O.form.username=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,l._)("div",q,[(0,l.Wm)(K,{label:"Họ",prop:"firstName"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:O.form.firstName,"onUpdate:modelValue":a[5]||(a[5]=e=>O.form.firstName=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(K,{label:"Tên",prop:"lastName"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:O.form.lastName,"onUpdate:modelValue":a[6]||(a[6]=e=>O.form.lastName=e)},null,8,["modelValue"])])),_:1})]),(0,l.Wm)(K,{label:"Email",prop:"email"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:O.form.email,"onUpdate:modelValue":a[7]||(a[7]=e=>O.form.email=e)},null,8,["modelValue"])])),_:1}),(0,l._)("div",T,[(0,l.Wm)(K,{label:"Ngày sinh",prop:"birthDate"},{default:(0,l.w5)((()=>[(0,l.Wm)(J,{modelValue:O.form.birthDate,"onUpdate:modelValue":a[8]||(a[8]=e=>O.form.birthDate=e),type:"date",placeholder:"Chọn ngày sinh",size:"default"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(K,{label:"Địa chỉ",prop:"address"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,{modelValue:O.form.address,"onUpdate:modelValue":a[9]||(a[9]=e=>O.form.address=e)},null,8,["modelValue"])])),_:1})])])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])])}t(8858),t(1318),t(3228);var O=t(1020),A=t(7322),H=t(2900),K={data(){return{dialogFormVisible:!1,form:{username:"",firstName:"",lastName:"",email:"",avatar:"",address:"",birthDate:""},formBackUp:{username:"",firstName:"",lastName:"",email:"",avatar:"",address:"",birthDate:""},avatarFile:"",rules:{username:[{validator:this.checkUsername,trigger:"blur"}],password:[{validator:this.checkPassword,trigger:"blur"}],email:[{validator:this.checkEmail,trigger:"blur"}]}}},computed:{...(0,O.Kc)(A.L),avatar(){let e=this.userStore.avatar;return""==e?"":H.yA+e},avatarInForm(){return this.form.avatar.includes("http://")?this.form.avatar:H.yA+this.form.avatar}},methods:{handleClickEdit(){null!=this.$refs.ruleFormRef&&this.$refs.ruleFormRef.clearValidate(),this.formBackUp.username=this.form.username=this.userStore.username,this.formBackUp.firstName=this.form.firstName=this.userStore.firstName,this.formBackUp.lastName=this.form.lastName=this.userStore.lastName,this.formBackUp.email=this.form.email=this.userStore.email,this.formBackUp.avatar=this.form.avatar=this.userStore.avatar,this.formBackUp.address=this.form.address=this.userStore.address,this.formBackUp.birthDate=this.form.birthDate=this.userStore.birthDate,this.dialogFormVisible=!0},handleCancel(){this.form.username==this.formBackUp.username&&this.form.firstName==this.formBackUp.firstName&&this.form.lastName==this.formBackUp.lastName&&this.form.email==this.formBackUp.email&&this.form.avatar==this.formBackUp.avatar&&this.form.address==this.formBackUp.address&&this.form.birthDate==this.formBackUp.birthDate?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.dialogFormVisible=!1})).catch((()=>{}))},handleUpdate(e){e&&e.validate((e=>{if(!e)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0;let e=new FormData;e.append("avatar-file",this.avatarFile);let a=JSON.stringify(this.form);const t=new Blob([a],{type:"application/json"});e.append("body",t),H.Nq(this.form.username,e).then((e=>{this.userStore.getInfor(),this.loadingStatus=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"})})).catch((e=>{let a="";try{a=e.response.data.messages}catch(t){console.log(e)}this.loadingStatus=!1,this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})})),this.dialogFormVisible=!1})).catch((e=>{console.log(e)}))}))},openFileInput(){this.$refs.uploadInput.value=null,this.$refs.uploadInput.click()},handleFileChange(e){let a=e.target.files[0];if(a.type.startsWith("image")){if(a.size/1024/1024>1)this.$message.error("Vui lòng chọn file ảnh có kích thước nhỏ hơn 1MB");else if(this.avatarFile=a,null!=a){let e=URL.createObjectURL(a);this.form.avatar=e}}else this.$message.error("Vui lòng chọn file ảnh")},resetAvatar(){this.form.avatar="",this.avatarFile=null},checkUsername(e,a,t){return""==a&&t(new Error("Vui lòng nhập username")),t()},checkPassword(e,a,t){return""==a&&t(new Error("Vui lòng nhập mật khẩu")),t()},checkEmail(e,a,t){""===a?t(new Error("Vui lòng nhập email")):(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)&&t(),t(new Error("Vui lòng nhập đúng địa chỉ email")))}}},L=t(89);const J=(0,L.Z)(K,[["render",R]]);var M=J},7520:function(e,a,t){e.exports=t.p+"img/default-avatar.2490029f.png"}}]);
//# sourceMappingURL=899.eed178bb.js.map