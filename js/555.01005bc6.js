"use strict";(self["webpackChunkforest_resources_manage_application"]=self["webpackChunkforest_resources_manage_application"]||[]).push([[555],{2607:function(t,a,e){e.d(a,{JA:function(){return l},LS:function(){return r},Lw:function(){return m},X5:function(){return n},Xo:function(){return s},Xw:function(){return d},_K:function(){return c},o5:function(){return o},tp:function(){return h},uQ:function(){return u}});var i=e(7877);const l=()=>i.x.get("wood-facilities/production-type"),n=t=>i.x.post(`wood-facilities/production-type/${t.woodType}`,t),o=t=>i.x.put(`wood-facilities/production-type/${t.woodType}`,t),s=t=>i.x.delete(`wood-facilities/production-type/${t}`),r=()=>i.x.get("wood-facilities/operation-form"),h=t=>i.x.post(`wood-facilities/operation-form/${t.name}`,t),c=t=>i.x.put(`wood-facilities/operation-form/${t.name}`,t),m=t=>i.x.delete(`wood-facilities/operation-form/${t}`),d=()=>i.x.get("wood-facilities"),u=(t,a)=>i.x.get(`wood-facilities/production-type/facilities/month/${t}/${a}`)},3555:function(t,a,e){e.r(a),e.d(a,{default:function(){return $}});var i=e(3396);const l={class:"grid grid-cols-10 container bg-[url('@/assets/image/wood-facilities-bg.jpg')] bg-cover bg-center"},n={class:"col-start-2 col-span-8 grid grid-cols-10 rounded-[25px] bg-white mt-4 p-5 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]"},o=(0,i._)("span",{class:"col-start-3 col-span-7 font-bold text-lg"},"Biểu đồ thống kê tổng số lượng động vật lưu trữ tại các cơ sở",-1),s={key:1,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},r=(0,i._)("span",null,"Bắt đầu",-1),h={class:""},c=(0,i._)("span",null,"Kết thúc",-1),m={key:2,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},d=(0,i._)("span",null,"Bắt đầu",-1),u={class:""},p=(0,i._)("span",null,"Kết thúc",-1),g={key:3,class:"mt-6 col-start-4 col-span-4 grid grid-cols-2 gap-3"},f=(0,i._)("span",null,"Bắt đầu",-1),y={class:""},b=(0,i._)("span",null,"Kết thúc",-1),w={class:"col-start-2 col-span-8 pt-[8rem] pb-[4rem]"},D={class:"col-start-1 col-span-4"},x={class:"col-start-5 col-span-6"},F=(0,i._)("span",{class:"text-[16px]"},"Số lượng động vật hiện tại của cơ sở",-1),k={class:"grid grid-cols-6"},_={class:"grid grid-cols-6"},C=["onClick"],T={class:"col-start-1 col-span-9"},Q={class:"grid grid-cols-16 gap-4"},V={class:"grid grid-cols-16 gap-4"},v=(0,i._)("span",null,"Tạo mới",-1);function B(t,a,e,B,A,U){const M=(0,i.up)("stacked-area-chart"),N=(0,i.up)("el-option"),L=(0,i.up)("el-select"),q=(0,i.up)("VueDatePicker"),W=(0,i.up)("el-table-column"),S=(0,i.up)("el-input"),$=(0,i.up)("el-button"),Y=(0,i.up)("el-table"),E=(0,i.up)("el-card"),H=(0,i.up)("el-form-item"),K=(0,i.up)("el-date-picker"),X=(0,i.up)("font-awesome-icon"),j=(0,i.up)("el-form"),z=(0,i.up)("el-dialog"),O=(0,i.up)("el-col"),I=(0,i.up)("el-row"),Z=(0,i.Q2)("loading");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",n,[o,0!=A.chartData.size?((0,i.wg)(),(0,i.j4)(M,{key:0,class:"col-start-3 col-span-7 h-[500px] mt-5","chart-label":A.chartLabel,"chart-data":A.chartData},null,8,["chart-label","chart-data"])):(0,i.kq)("",!0),(0,i.Wm)(L,{modelValue:A.dataType,"onUpdate:modelValue":a[0]||(a[0]=t=>A.dataType=t),class:"mt-[3rem] mr-3 col-start-3 col-span-1",placeholder:"Select",size:"large"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(A.dataTypes,(t=>((0,i.wg)(),(0,i.j4)(N,{key:t.label,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"month"==A.dataType?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",null,[r,(0,i.Wm)(q,{modelValue:A.beginMonth,"onUpdate:modelValue":a[1]||(a[1]=t=>A.beginMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",h,[c,(0,i.Wm)(q,{modelValue:A.endMonth,"onUpdate:modelValue":a[2]||(a[2]=t=>A.endMonth=t),"month-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"quarter"==A.dataType?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",null,[d,(0,i.Wm)(q,{modelValue:A.beginQuarter,"onUpdate:modelValue":a[3]||(a[3]=t=>A.beginQuarter=t),"quarter-picker":""},null,8,["modelValue"])]),(0,i._)("div",u,[p,(0,i.Wm)(q,{modelValue:A.endQuarter,"onUpdate:modelValue":a[4]||(a[4]=t=>A.endQuarter=t),"quarter-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0),"year"==A.dataType?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",null,[f,(0,i.Wm)(q,{modelValue:A.beginYear,"onUpdate:modelValue":a[5]||(a[5]=t=>A.beginYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])]),(0,i._)("div",y,[b,(0,i.Wm)(q,{modelValue:A.endYear,"onUpdate:modelValue":a[6]||(a[6]=t=>A.endYear=t),"year-picker":"",locale:"vi",cancelText:"Hủy",selectText:"Chọn"},null,8,["modelValue"])])])):(0,i.kq)("",!0)]),(0,i._)("div",w,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O,{span:24,offset:0},{default:(0,i.w5)((()=>[(0,i.Wm)(E,{class:"h-[530px] rounded-[50px] mb-2",shadow:"always"},{default:(0,i.w5)((()=>[(0,i.Wm)(Y,{data:A.filterFacilitiesTable,class:"h-[530px] w-[93rem]",fit:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(A.tableColumns,((t,a)=>((0,i.wg)(),(0,i.j4)(W,{key:a,label:t.title,prop:t.value,align:"center"},null,8,["label","prop"])))),128)),(0,i.Wm)(W,{"min-width":120,align:"center"},{header:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.search,"onUpdate:modelValue":a[7]||(a[7]=t=>A.search=t),size:"large",placeholder:"Tìm kiếm theo tên"},null,8,["modelValue"])])),default:(0,i.w5)((t=>[(0,i.Wm)($,{onClick:a=>U.handleEdit(t.$index,t.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("Chi tiết")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,i.Wm)(z,{class:"block rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",top:"8vh",modelValue:A.dialogFormVisible,"onUpdate:modelValue":a[22]||(a[22]=t=>A.dialogFormVisible=t),title:U.formTitle,"before-close":U.handleCancel},{footer:(0,i.w5)((()=>[(0,i._)("span",V,["update"==A.formType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 mr-3 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-red-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[19]||(a[19]=t=>A.dialogFormVisible=!1)}," Xóa ")):(0,i.kq)("",!0),"update"==A.formType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[20]||(a[20]=t=>U.handleUpdate(this.$refs.facilitiesForm))}," Cập nhập ")):(0,i.kq)("",!0),"create"==A.formType?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[21]||(a[21]=t=>U.handleCreateAnimalFacility(this.$refs.facilitiesForm))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(j,{class:"grid grid-cols-10 gap-10",ref:"facilitiesForm",model:A.form,"status-icon":"",rules:A.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",D,[(0,i.Wm)(H,{label:"Mã",prop:"code"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.form.code,"onUpdate:modelValue":a[8]||(a[8]=t=>A.form.code=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(H,{label:"Tên cơ sở",prop:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.form.name,"onUpdate:modelValue":a[9]||(a[9]=t=>A.form.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(H,{label:"Sức chứa",prop:"capacity"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.form.capacity,"onUpdate:modelValue":a[10]||(a[10]=t=>A.form.capacity=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(H,{label:"Ngày thành lập",prop:"date"},{default:(0,i.w5)((()=>[(0,i.Wm)(K,{modelValue:A.form.date,"onUpdate:modelValue":a[11]||(a[11]=t=>A.form.date=t),type:"date",placeholder:"Chọn ngày thành lập",size:"default"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(H,{label:"Trực thuộc",prop:"administrationName"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.form.administrationName,"onUpdate:modelValue":a[12]||(a[12]=t=>A.form.administrationName=t)},null,8,["modelValue"])])),_:1})]),(0,i._)("div",x,[F,(0,i.Wm)(Y,{class:"mt-2",data:U.animalQuantityTable,height:"300",border:""},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{prop:"animalName",label:"Tên động vật",align:"center"}),(0,i.Wm)(W,{prop:"quantity",label:"Số lượng",align:"center"}),(0,i.Wm)(W,{"min-width":90,align:"center"},{header:(0,i.w5)((()=>[(0,i._)("div",k,[(0,i._)("button",{class:"px-3 py-2 col-span-6 col-start-1 font-sans font-bold text-sm text-white rounded-lg shadow-lg bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[13]||(a[13]=(...t)=>U.handleClickCreateAnimalQuantity&&U.handleClickCreateAnimalQuantity(...t))},[(0,i.Wm)(X,{class:"pr-1",icon:["fas","plus"]}),(0,i.Uk)(" Thêm mới ")])])])),default:(0,i.w5)((t=>[(0,i._)("div",_,[(0,i._)("button",{class:"border-2 px-2 py-1 col-span-4 col-start-2 hover:text-blue-400 hover:border-blue-400",onClick:a=>U.handleEditAnimalQuantity(t.$index,t.row)},"Chi tiết",8,C)])])),_:1})])),_:1},8,["data"])])])),_:1},8,["model","rules"]),(0,i.Wm)(z,{class:"w-[25rem] rounded-lg bg-white p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)] dark:bg-neutral-700",modelValue:A.dialogAnimalFormVisible,"onUpdate:modelValue":a[18]||(a[18]=t=>A.dialogAnimalFormVisible=t),title:"Số lượng động vật","before-close":U.handleCancelInAnimalTable},{footer:(0,i.w5)((()=>[(0,i._)("span",Q,["update"==A.animalFormType?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[16]||(a[16]=t=>U.handleUpdateInAnimalTable(this.$refs.animalQuantityForm))}," Cập nhập ")):(0,i.kq)("",!0),"create"==A.animalFormType?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"p-2 col-start-12 font-sans font-bold text-sm text-white rounded-lg shadow-lg px-5 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[17]||(a[17]=t=>U.handleCreateAnimalQuantity(this.$refs.animalQuantityForm))}," Tạo mới ")):(0,i.kq)("",!0)])])),default:(0,i.w5)((()=>[(0,i.Wm)(j,{class:"grid grid-cols-10 gap-10",ref:"animalQuantityForm",model:A.animalForm,"status-icon":"",rules:A.rules,size:"default","label-position":"top"},{default:(0,i.w5)((()=>[(0,i._)("div",T,[(0,i.Wm)(H,{label:"Tên động vật",prop:"animalName"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.animalForm.animalName,"onUpdate:modelValue":a[14]||(a[14]=t=>A.animalForm.animalName=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(H,{label:"Số lượng",prop:"quantity"},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{modelValue:A.animalForm.quantity,"onUpdate:modelValue":a[15]||(a[15]=t=>A.animalForm.quantity=t)},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])),_:1},8,["modelValue","title","before-close"])])),_:1})])),_:1})),[[Z,A.loadingStatus]]),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Wm)(O,{offset:2},{default:(0,i.w5)((()=>[(0,i._)("button",{class:"w-full md:w-auto flex justify-center items-center p-3 mt-3 ml-4 space-x-4 font-sans font-bold text-white rounded-[10px] shadow-lg px-9 bg-blue-500 shadow-blue-100 hover:bg-opacity-90 hover:shadow-lg border transition hover:-translate-y-0.5 duration-150",onClick:a[23]||(a[23]=(...t)=>U.handleClickCreateAnimalFacility&&U.handleClickCreateAnimalFacility(...t))},[(0,i.Wm)(X,{icon:["fas","plus"],size:"lg"}),v])])),_:1})])),_:1})])])),[[Z,A.loadingStatus]])}e(560);var A=e(9343),U=e(5039),M=e(2607),N=e(3881),L=e(7514),q={name:"animalFacility",components:{StackedAreaChart:A.Z},data(){return{loadingStatus:!1,quarter:(0,N.Z)(new Date),beginMonth:{month:(new Date).getMonth()-6,year:(new Date).getFullYear()},endMonth:{month:(new Date).getMonth()-1,year:(new Date).getFullYear()},beginQuarter:new Date("2023-01-01"),endQuarter:new Date,beginYear:(new Date).getFullYear()-1,endYear:(new Date).getFullYear(),chartLabel:[],chartData:new Map,chartLabelCopy:[],chartDataCopy:new Map,dataTypes:[{value:"month",label:"Tháng"},{value:"quarter",label:"Quý"},{value:"year",label:"Năm"}],dataType:"month",search:"",tableColumns:[{title:"Tên cơ sở",value:"name"},{title:"Ngày thành lập",value:"date"},{title:"Sức chứa",value:"capacity"},{title:"Trực thuộc",value:"administration[name]"}],facilitiesTable:[],filterFacilitiesTable:[],animalQuantityData:null,dialogFormVisible:!1,dialogAnimalFormVisible:!1,form:{code:"",name:"",date:"",capacity:"",administrationName:""},formBackUp:null,formType:"update",animalForm:{animalName:"",quantity:""},animalFormBackUp:null,animalFormType:"update",rules:{}}},computed:{formatBeginMonth(){if(null!=this.beginMonth){let t=this.beginMonth.month<9?"0"+(this.beginMonth.month+1):this.beginMonth.month+1,a=this.beginMonth.year+"-"+t+"-01";return a}},formatEndMonth(){if(null!=this.endMonth){let t=this.endMonth.month<9?"0"+(this.endMonth.month+1):this.endMonth.month+1,a=this.endMonth.year+"-"+t+"-01";return a}},formatBeginQuarter(){if(null!=this.beginQuarter){let t=this.beginQuarter.getMonth()<9?"0"+(this.beginQuarter.getMonth()+1):this.beginQuarter.getMonth()+1,a=this.beginQuarter.getFullYear()+"-"+t+"-01";return a}},formatEndQuarter(){if(null!=this.endQuarter){let t=this.endQuarter.getMonth()<9?"0"+(this.endQuarter.getMonth()+1):this.endQuarter.getMonth()+1,a=this.endQuarter.getFullYear()+"-"+t+"-01";return a}},formTitle(){return"update"==this.formType?"Cập nhập":"Tạo mới"},animalQuantityTable(){if(null!=this.animalQuantityData&&""!=this.form.code)return this.animalQuantityData.get(this.form.code)}},watch:{dataType(t){"month"==t?this.formatBeginMonth&&null!=this.formatEndMonth&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth)):"quarter"==t?this.formatBeginQuarter&&null!=this.formatEndQuarter&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByQuarter(this.formatBeginQuarter,this.formatEndQuarter)):this.beginYear&&null!=this.endYear&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByYear(this.beginYear,this.endYear))},formatBeginMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByMonth(t,this.formatEndMonth))},formatEndMonth(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByMonth(this.formatBeginMonth,t))},formatBeginQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByQuarter(t,this.formatEndQuarter))},formatEndQuarter(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByQuarter(this.formatBeginQuarter,t))},beginYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByYear(t,this.endYear)),console.log(t)},endYear(t){null!=t&&(this.chartLabelCopy=this.chartLabel,this.chartLabel=[],this.chartDataCopy=this.chartData,this.chartData.clear(),this.setupAnimalQuantityDataByYear(this.beginYear,t)),console.log(t)}},methods:{setupAnimalQuantityDataByMonth(t,a){this.loadingStatus=!0,M.uQ(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].date.slice(0,7);this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else this.chartData.set(t.data[a].data[i].facilitiesName,[t.data[a].data[i].quantity])}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupAnimalQuantityDataByQuarter(t,a){this.loadingStatus=!0,U.TC(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].quarter;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else this.chartData.set(t.data[a].data[i].facilitiesName,[t.data[a].data[i].quantity])}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},setupAnimalQuantityDataByYear(t,a){this.loadingStatus=!0,U.Hw(t,a).then((t=>{for(let a=0;a<=t.data.length-1;a++){let e=t.data[a].year;this.chartLabel.push(e);for(let i=0;i<t.data[a].data.length;i++)if(this.chartData.has(t.data[a].data[i].facilitiesName)){let e=this.chartData.get(t.data[a].data[i].facilitiesName);e.push(t.data[a].data[i].quantity),this.chartData.set(t.data[a].data[i].facilitiesName,e)}else this.chartData.set(t.data[a].data[i].facilitiesName,[t.data[a].data[i].quantity])}this.loadingStatus=!1})).catch((t=>{this.loadingStatus=!1,this.chartData=this.chartDataCopy,this.chartLabel=this.chartLabelCopy;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))},formatQuarter(t){return console.log(t),(0,L.Z)(t,"QQQ")},setupAnimalFacilities(){this.loadingStatus=!0,M.Xw().then((t=>{this.facilitiesTable=t.data,this.filterFacilitiesTable=this.facilitiesTable,this.loadingStatus=!1})).catch((t=>{console.log(t)}))},setupAnimalQuantity(){this.loadingStatus=!0,U.$y().then((t=>{this.animalQuantityData=new Map(Object.entries(t.data)),console.log(this.animalQuantityTable),this.loadingStatus=!1})).catch((t=>{}))},handleEdit(t,a){null!=this.$refs.facilitiesForm&&this.$refs.facilitiesForm.clearValidate(),this.formType="update",this.form=a,this.form.administrationName=a.administration.name,this.formBackUp={code:this.form.code,name:this.form.name,date:this.form.date,capacity:this.form.capacity,administrationName:this.form.administrationName},this.dialogFormVisible=!0},handleEditAnimalQuantity(t,a){null!=this.$refs.animalQuantityForm&&this.$refs.animalQuantityForm.clearValidate(),this.animalForm=a,this.animalFormBackUp={animalName:this.animalForm.animalName,quantity:this.animalForm.quantity},this.dialogAnimalFormVisible=!0},handleUpdate(){},handleUpdateInAnimalTable(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0;let t={facilitiesName:this.form.name,animalName:this.animalForm.animalName,quantity:this.animalForm.quantity};U.qq(t).then((t=>{this.loadingStatus=!1,this.$notify({title:"Thành công",message:"Cập nhập thành công",type:"success"}),this.setupAnimalQuantity()})).catch((t=>{this.loadingStatus=!1;try{this.$notify({title:"Đã xảy ra lỗi",message:t.response.data.messages,type:"error"}),console.log(t.message)}catch(a){console.log(a)}})),this.dialogAnimalFormVisible=!1})).catch((t=>{console.log(t)}))}))},handleCancel(){null!=this.form&&null!=this.formBackUp&&(this.form.code==this.formBackUp.code&&this.form.name==this.formBackUp.name&&this.form.date==this.formBackUp.date&&this.form.capacity==this.formBackUp.capacity&&this.form.administrationName==this.formBackUp.administrationName?this.dialogFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.formBackUp&&(this.form.code=this.formBackUp.code,this.form.name=this.formBackUp.name,this.form.date=this.formBackUp.date,this.form.capacity=this.formBackUp.capacity,this.form.administrationName=this.formBackUp.administrationName),this.dialogFormVisible=!1})).catch((()=>{}))),this.dialogFormVisible=!1},handleCancelInAnimalTable(){null!=this.animalFormBackUp&&null!=this.animalForm&&(this.animalForm.animalName==this.animalFormBackUp.animalName&&this.animalForm.quantity==this.animalFormBackUp.quantity?this.dialogAnimalFormVisible=!1:this.$confirm("Hủy bỏ thay đổi. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{null!=this.animalFormBackUp&&(this.animalForm.animalName=this.animalFormBackUp.animalName,this.animalForm.quantity=this.animalFormBackUp.quantity),this.dialogAnimalFormVisible=!1})).catch((()=>{}))),this.dialogAnimalFormVisible=!1},handleClickCreateAnimalFacility(){this.formType="create",this.resetFormData(),this.formBackUp=this.forthí,this.dialogFormVisible=!0},handleCreateAnimalFacility(t){t&&t.validate((t=>{t&&this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0;let t={code:this.form.code,name:this.form.name,date:Date.now(),capacity:this.form.capacity,adminstrationCode:this.form.administrationName,detail:""};U.hI(t).then((t=>{this.dialogFormVisible=!1,this.$notify({title:"Thành công",type:"success",message:"Tạo mới thành công"}),this.setupAnimalFacilities()})).catch((t=>{this.loadingStatus=!1;try{let a="";a=t.response.data.messages,this.$notify({title:"Đã xảy ra lỗi",type:"error",message:a})}catch(a){}}))})).catch((()=>{}))}))},handleClickCreateAnimalQuantity(){this.animalFormType="create",this.resetAnimalFormData(),this.formBackUp=this.form,this.dialogAnimalFormVisible=!0},handleCreateAnimalQuantity(t){t&&t.validate((t=>{if(!t)return!1;this.$confirm("Cập nhập thông tin này. Tiếp tục?","Xác nhận",{confirmButtonText:"OK",cancelButtonText:"Hủy",type:"warning"}).then((()=>{this.loadingStatus=!0;let t={codeASF:this.form.code,nameAS:this.animalForm.animalName,quantity:this.animalForm.quantity,date:Date.now()};U.jD(t).then((t=>{this.setupAnimalQuantity()})).catch((t=>{this.loadingStatus=!1;let a="";try{a=t.response.data.messages}catch(t){console.log(t)}this.$notify({title:"Đã xảy ra lỗi",message:a,type:"error"})}))})).catch((t=>{console.log(t)}))}))},resetFormData(){this.form.administrationName="",this.form.capacity=0,this.form.code="",this.form.date="",this.form.name=""},resetAnimalFormData(){this.animalForm.animalName="",this.animalForm.quantity=1}},created(){this.setupAnimalQuantityDataByMonth(this.formatBeginMonth,this.formatEndMonth),this.setupAnimalFacilities(),this.setupAnimalQuantity()}},W=e(89);const S=(0,W.Z)(q,[["render",B]]);var $=S}}]);
//# sourceMappingURL=555.01005bc6.js.map